{"ast":null,"code":"import _regeneratorRuntime from\"/Users/mac/writingPlatform/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _defineProperty from\"/Users/mac/writingPlatform/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _asyncToGenerator from\"/Users/mac/writingPlatform/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"/Users/mac/writingPlatform/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/mac/writingPlatform/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Container,Row,Col,Card,CardBody,CardTitle,NavItem,NavLink,Label,Input,Form,FormGroup}from\"reactstrap\";import{Link}from\"react-router-dom\";// availity-reactstrap-validation\nimport{AvForm,AvField,Button}from\"availity-reactstrap-validation\";import instance from\"../../../helpers/axiosly\";import*as _ from\"lodash\";import stateWrapper from\"../../../containers/provider\";// Pages Components\n// import LatestTranaction from \"./LatestTranaction\";\n//Import Breadcrumb\nimport Breadcrumbs from\"../../../components/Common/Breadcrumb\";//i18n\nimport{withNamespaces}from\"react-i18next\";var CreateService=function CreateService(props){var _useState=useState({name:\"\",price:\"\",loading:false}),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),updateService=_useState4[0],setUpdateService=_useState4[1];useEffect(function(){var serviceData,userData;userData=props.userStore.fetchUser(props);serviceData=props.masterStore.fetchService(userData.access_token);if(props.match.params.id){setUpdateService(\"update\");setState(_objectSpread(_objectSpread({},state),{},{name:currentService.map(function(e){return e.name;}),price:currentService.map(function(e){return e.price;})}));}else{setState(_objectSpread(_objectSpread({},state),{},{name:'',price:''}));}//eslint-disable-line\n},[]);var services=props.masterStore.state.sessionData.serviceList;var currentService=services.filter(function(e){return e.id===Number(props.match.params.id);});function handleSubmit(_x){return _handleSubmit.apply(this,arguments);}function _handleSubmit(){_handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var userData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setState(_objectSpread(_objectSpread({},state),{},{loading:true}));userData=props.userStore.fetchUser(props);e.preventDefault();props.masterStore.addService(state,userData.access_token);setTimeout(function(){setState(_objectSpread(_objectSpread({},state),{},{name:\"\",price:\"\",loading:false}));},2000);setTimeout(function(){props.history.push({pathname:\"/services\",state:{status:'created'}});},2000);case 6:case\"end\":return _context.stop();}}},_callee);}));return _handleSubmit.apply(this,arguments);}function handleUpdate(_x2){return _handleUpdate.apply(this,arguments);}function _handleUpdate(){_handleUpdate=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var userData,id;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setState(_objectSpread(_objectSpread({},state),{},{loading:true}));userData=props.userStore.fetchUser(props);e.preventDefault();id=Number(props.match.params.id);props.masterStore.updateServices(state,userData.access_token,id);setTimeout(function(){setState(_objectSpread(_objectSpread({},state),{},{name:\"\",price:\"\",loading:false}));},2000);setTimeout(function(){props.history.push({pathname:\"/services\",state:{status:'updated'}});},2000);case 7:case\"end\":return _context2.stop();}}},_callee2);}));return _handleUpdate.apply(this,arguments);}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"page-content\"},/*#__PURE__*/React.createElement(Container,{fluid:true},/*#__PURE__*/React.createElement(Breadcrumbs,{title:props.t(\"Services\"),breadcrumbItem:props.t(\"Create Service\")}),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{lg:\"12\"},/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardBody,null,updateService===\"\"?/*#__PURE__*/React.createElement(CardTitle,null,\"CREATE SERVICE\"):/*#__PURE__*/React.createElement(CardTitle,null,\"UPDATE SERVICE\"),/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{lg:\"6\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,null,\"Service\"),/*#__PURE__*/React.createElement(Input,{value:state.name,onChange:function onChange(e){return setState(_objectSpread(_objectSpread({},state),{},{name:e.target.value}));},type:\"text\",className:\"form-control\"}))),/*#__PURE__*/React.createElement(Col,{lg:\"6\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,null,\"Price\"),/*#__PURE__*/React.createElement(Input,{value:state.price,onChange:function onChange(e){return setState(_objectSpread(_objectSpread({},state),{},{price:e.target.value}));},type:\"text\",className:\"form-control\"})))),updateService===\"\"?/*#__PURE__*/React.createElement(\"div\",{className:\" \"},state.loading?/*#__PURE__*/React.createElement(\"div\",{className:\"spinner-grow text-primary m-1\",role:\"status\"}):/*#__PURE__*/React.createElement(\"button\",_defineProperty({type:\"submit\",className:\"btn btn-primary waves-effect waves-light mx-2\"},\"type\",\"submit\"),\"Post Service\")):/*#__PURE__*/React.createElement(\"div\",null,state.loading?/*#__PURE__*/React.createElement(\"div\",{className:\"spinner-grow text-primary m-1\",role:\"status\"}):/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary waves-effect waves-light mx-2\",type:\"submit\",onClick:handleUpdate},\"Update Service\"))))))))));};export default withNamespaces()(stateWrapper(CreateService));","map":{"version":3,"sources":["/Users/mac/writingPlatform/src/pages/SuperAdmin/Services/CreateService.js"],"names":["React","useState","useEffect","Container","Row","Col","Card","CardBody","CardTitle","NavItem","NavLink","Label","Input","Form","FormGroup","Link","AvForm","AvField","Button","instance","_","stateWrapper","Breadcrumbs","withNamespaces","CreateService","props","name","price","loading","state","setState","updateService","setUpdateService","serviceData","userData","userStore","fetchUser","masterStore","fetchService","access_token","match","params","id","currentService","map","e","services","sessionData","serviceList","filter","Number","handleSubmit","preventDefault","addService","setTimeout","history","push","pathname","status","handleUpdate","updateServices","t","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport {\n  Container,\n  Row,\n  Col,\n  Card,\n  CardBody,\n  CardTitle,\n  NavItem,\n  NavLink,\n  Label,\n  Input,\n  Form,\n  FormGroup,\n} from \"reactstrap\";\nimport { Link } from \"react-router-dom\";\n\n// availity-reactstrap-validation\nimport { AvForm, AvField, Button } from \"availity-reactstrap-validation\";\nimport instance from \"../../../helpers/axiosly\";\n\n\n\nimport * as _ from \"lodash\";\nimport stateWrapper from \"../../../containers/provider\";\n\n\n\n// Pages Components\n// import LatestTranaction from \"./LatestTranaction\";\n\n//Import Breadcrumb\nimport Breadcrumbs from \"../../../components/Common/Breadcrumb\";\n\n//i18n\nimport { withNamespaces } from \"react-i18next\";\n\nconst CreateService = (props) => {\n\n  const [state, setState] = useState({\n    name: \"\",\n    price: \"\",\n    loading: false\n  });\n\n  const[updateService, setUpdateService] = useState(\"\");\n\n\n\n\n  useEffect(() => {\n\n    let serviceData, userData;\n    userData = props.userStore.fetchUser(props);\n\n    serviceData = props.masterStore.fetchService(\n      userData.access_token\n    );\n\n    if(props.match.params.id){\n      setUpdateService(\"update\")\n        setState({\n        ...state,\n        name: currentService.map(e => {return (e.name)}),\n        price: currentService.map(e => {return (e.price)})\n        })\n    } else {\n        setState({\n        ...state,\n        name: '',\n        price: ''\n      })\n      }\n\n    //eslint-disable-line\n  }, [])\n\n  let services = props.masterStore.state.sessionData.serviceList;\n\n  let currentService = services.filter((e) => e.id === Number(props.match.params.id))\n\n\n\n  async function handleSubmit(e) {\n    setState({...state,\n      loading: true,\n    });\n    let  userData;\n    userData = props.userStore.fetchUser(props);\n\n\n\n    e.preventDefault()\n    props.masterStore.addService(state, userData.access_token)\n\n    setTimeout(function(){\n      setState({...state,\n        name: \"\",\n        price: \"\",\n        loading: false\n      })\n    }, 2000)\n\n    setTimeout(function(){\n      props.history.push({pathname:\"/services\", state:{status: 'created'}});\n    }, 2000)\n\n\n\n}\n\n  async function handleUpdate(e){\n    setState({...state,\n      loading: true,\n    });\n    let  userData;\n    userData = props.userStore.fetchUser(props);\n\n\n\n    e.preventDefault()\n    let id = Number(props.match.params.id)\n\n    props.masterStore.updateServices(state, userData.access_token, id)\n\n    setTimeout(function(){\n      setState({...state,\n        name: \"\",\n        price: \"\",\n        loading: false\n      })\n    }, 2000)\n\n    setTimeout(function(){\n      props.history.push({pathname:\"/services\", state:{status: 'updated'}});\n    }, 2000)\n\n\n  }\n\n  return (\n    <React.Fragment>\n      <div className=\"page-content\">\n        <Container fluid>\n          {/* Render Breadcrumb */}\n          <Breadcrumbs\n            title={props.t(\"Services\")}\n            breadcrumbItem={props.t(\"Create Service\")}\n          />\n\n          <Row>\n            <Col lg=\"12\">\n              <Card>\n                <CardBody>\n                {updateService === \"\" ? <CardTitle>CREATE SERVICE</CardTitle> :\n                    <CardTitle>UPDATE SERVICE</CardTitle>\n                  }\n                    <form onSubmit={handleSubmit}>\n                    <Row>\n                      <Col lg=\"6\">\n                        <FormGroup>\n                          <Label>\n                            Service\n                          </Label>\n                          <Input\n                            value={state.name}\n                            onChange={(e) =>\n                              setState({ ...state, name: e.target.value })\n                            }\n                            type=\"text\"\n                            className=\"form-control\"\n\n                          />\n                        </FormGroup>\n                      </Col>\n\n                      <Col lg=\"6\">\n                        <FormGroup>\n                          <Label>\n                            Price\n                          </Label>\n                          <Input\n                            value={state.price}\n                            onChange={(e) =>\n                              setState({ ...state, price: e.target.value })\n                            }\n                            type=\"text\"\n                            className=\"form-control\"\n\n                          />\n                        </FormGroup>\n                      </Col>\n                    </Row>\n                     {updateService === \"\" ? (\n                       <div className=\" \">\n                         {state.loading ? (\n                           <div\n                           className=\"spinner-grow text-primary m-1\"\n                           role=\"status\"\n                         >\n                           {/* <span className=\"sr-only\">Loading...</span> */}\n                         </div>\n                         ): (\n                          <button\n                         type=\"submit\"\n                         className=\"btn btn-primary waves-effect waves-light mx-2\"\n                         type=\"submit\"\n                       >\n                         Post Service\n                       </button>\n                         )}\n\n                       </div>\n                     ) : (\n                      <div>\n                        {state.loading ? (\n                           <div\n                           className=\"spinner-grow text-primary m-1\"\n                           role=\"status\"\n                         >\n                           {/* <span className=\"sr-only\">Loading...</span> */}\n                         </div>\n                         ): (\n                          <button\n                        className=\"btn btn-primary waves-effect waves-light mx-2\"\n                        type=\"submit\"\n                        onClick={handleUpdate}\n                      >\n                        Update Service\n                      </button>\n                         )}\n\n                    </div>\n                     )}\n\n\n\n                  </form>\n\n\n                </CardBody>\n              </Card>\n            </Col>\n          </Row>\n        </Container>\n      </div>\n    </React.Fragment>\n\n);\n};\n\nexport default withNamespaces()(stateWrapper(CreateService));\n"]},"metadata":{},"sourceType":"module"}