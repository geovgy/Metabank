{"ast":null,"code":"var _jsxFileName = \"/Users/mac/writingPlatform/src/routes/middleware/Writermiddleware.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { Route, Redirect, withRouter } from \"react-router-dom\";\nimport { LOCAL_STORAGE_SIGNIN_KEY } from '../../App.constants';\nimport { grantPermission } from '../../GrantPermission';\nimport { ROLES } from '../../App.constants';\nimport stateWrapper from '../../containers/provider';\n\nconst HookWrapper = ({\n  component: Component,\n  layout: Layout,\n  roles,\n  path,\n  ...rest\n}) => {\n  const [state, setState] = useState(false);\n  useEffect(() => {\n    (async () => {\n      var _rest$userStore, _rest$masterStore;\n\n      const userData = rest === null || rest === void 0 ? void 0 : (_rest$userStore = rest.userStore) === null || _rest$userStore === void 0 ? void 0 : _rest$userStore.fetchUser();\n      const bearertoken = userData === null || userData === void 0 ? void 0 : userData.access_token;\n      const userId = userData === null || userData === void 0 ? void 0 : userData.id;\n      console.log(userData, bearertoken);\n      const writerExamStatus = await (rest === null || rest === void 0 ? void 0 : (_rest$masterStore = rest.masterStore) === null || _rest$masterStore === void 0 ? void 0 : _rest$masterStore.findWriterExam(userId, bearertoken));\n      console.log(writerExamStatus === null || writerExamStatus === void 0 ? void 0 : writerExamStatus.status, 'Exam Status');\n      console.log(path);\n\n      if ((writerExamStatus === null || writerExamStatus === void 0 ? void 0 : writerExamStatus.status) == 'Success') {\n        setState(true);\n        return;\n      } else {\n        setState(false);\n        return;\n      }\n\n      console.log(writerExamStatus);\n    })();\n  }, []);\n  return /*#__PURE__*/React.createElement(Writermiddleware, Object.assign({}, rest, {\n    show: state,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 9\n    }\n  }));\n};\n\nfunction Writermiddleware({\n  component: Component,\n  layout: Layout,\n  roles,\n  path,\n  state,\n  ...rest\n}) {\n  console.log(state);\n  const showRoutes = !state && path == '/wexam' && /*#__PURE__*/React.createElement(Route, Object.assign({}, rest, {\n    //   findWriterExam\n    render: props => /*#__PURE__*/React.createElement(Layout, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(Component, Object.assign({}, props, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 5\n      }\n    }))),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 3\n    }\n  }));\n  return /*#__PURE__*/React.createElement(React.Fragment, null, grantPermission([ROLES.WRITER]) && showRoutes, !grantPermission([ROLES.WRITER]) && /*#__PURE__*/React.createElement(Route, Object.assign({}, rest, {\n    render: props => /*#__PURE__*/React.createElement(Redirect, {\n      to: {\n        pathname: \"/login\",\n        state: {\n          from: props.location\n        }\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 8\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 6\n    }\n  })));\n}\n\nexport default withRouter(stateWrapper(HookWrapper));","map":{"version":3,"sources":["/Users/mac/writingPlatform/src/routes/middleware/Writermiddleware.js"],"names":["React","useEffect","useState","Route","Redirect","withRouter","LOCAL_STORAGE_SIGNIN_KEY","grantPermission","ROLES","stateWrapper","HookWrapper","component","Component","layout","Layout","roles","path","rest","state","setState","userData","userStore","fetchUser","bearertoken","access_token","userId","id","console","log","writerExamStatus","masterStore","findWriterExam","status","Writermiddleware","showRoutes","props","WRITER","pathname","from","location"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Route, Redirect, withRouter } from \"react-router-dom\";\nimport { LOCAL_STORAGE_SIGNIN_KEY } from '../../App.constants'\nimport { grantPermission } from '../../GrantPermission'\nimport { ROLES } from '../../App.constants';\nimport stateWrapper from '../../containers/provider';\n\nconst HookWrapper = ({component: Component, layout: Layout, roles, path, ...rest}) => {\n\tconst [state, setState] = useState(false);\n\tuseEffect(() => {\n\t\t(async () => {\n\t\t\tconst userData = rest?.userStore?.fetchUser();\n\t\t\tconst bearertoken = userData?.access_token;\n\t\t\tconst userId = userData?.id\n\t\t\tconsole.log(userData, bearertoken);\n\t\t\tconst writerExamStatus = await rest?.masterStore?.findWriterExam(userId, bearertoken);\n\t\t\tconsole.log(writerExamStatus?.status, 'Exam Status');\n\t\t\tconsole.log(path);\n\t\t\t if (writerExamStatus?.status == 'Success') {\n\t\t\t\t setState(true);\n\t\t\t\t return;\n\t\t\t } else {\n\t\t\t\t setState(false);\n\t\t\t\t return\n\t\t\t }\n\t\t\tconsole.log(writerExamStatus);\n\t\t})()\n\n\t}, []);\n\n\treturn <Writermiddleware {...rest} show={state}/>\n}\n\nfunction Writermiddleware({\n\tcomponent: Component, layout: Layout, roles, path, state,  ...rest\n}) {\n\n\tconsole.log(state);\n\t\n\tconst showRoutes = !state && path == '/wexam' && (\n\t\t<Route\n\t\t{...rest}\n\t\t//   findWriterExam\n\t\trender={(props) => (\n\t\t\t<Layout>\n\t\t\t\t<Component {...props} />\n\t\t\t</Layout>\n\t\t)}\n\t/>\n\t)\n\n\n\n\treturn (\n\t\t<>\n\t\t\t{ grantPermission([ROLES.WRITER]) && showRoutes}\n\t\t\t{\n\t\t\t\t!grantPermission([ROLES.WRITER]) && (\n\t\t\t\t\t<Route\n\t\t\t\t\t\t{...rest}\n\t\t\t\t\t\trender={(props) => (\n\t\t\t\t\t\t\t<Redirect to={{ pathname: \"/login\", state: { from: props.location } }} />\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t/>\n\n\t\t\t\t)\n\t\t\t}\n\t\t</>\n\t);\n}\n\nexport default withRouter(stateWrapper(HookWrapper));\n\n"]},"metadata":{},"sourceType":"module"}