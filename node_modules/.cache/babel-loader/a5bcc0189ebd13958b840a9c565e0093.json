{"ast":null,"code":"import _regeneratorRuntime from\"/Users/mac/writingPlatform/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _defineProperty from\"/Users/mac/writingPlatform/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _asyncToGenerator from\"/Users/mac/writingPlatform/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"/Users/mac/writingPlatform/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/mac/writingPlatform/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Container,Row,Col,Card,CardBody,CardTitle,NavItem,NavLink,Label,Input,Form,FormGroup}from\"reactstrap\";import{Link}from\"react-router-dom\";// availity-reactstrap-validation\nimport{AvForm,AvField,Button}from\"availity-reactstrap-validation\";import instance from\"../../../helpers/axiosly\";import*as _ from\"lodash\";import stateWrapper from\"../../../containers/provider\";// Pages Components\n// import LatestTranaction from \"./LatestTranaction\";\n//Import Breadcrumb\nimport Breadcrumbs from\"../../../components/Common/Breadcrumb\";//i18n\nimport{withNamespaces}from\"react-i18next\";var CreateSubjectArea=function CreateSubjectArea(props){var _useState=useState({name:\"\",price:\"\",loading:false}),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),updateSubject=_useState4[0],setUpdateSubject=_useState4[1];useEffect(function(){var SubjectareaData,userData;userData=props.userStore.fetchUser(props);SubjectareaData=props.masterStore.fetchSubjectarea(userData.access_token);if(props.match.params.id){setUpdateSubject(\"update\");setState(_objectSpread(_objectSpread({},state),{},{name:currentSubject.map(function(e){return e.name;}),price:currentSubject.map(function(e){return e.price;})}));}else{setState(_objectSpread(_objectSpread({},state),{},{name:'',price:''}));}//eslint-disable-line\n},[]);var subjectareas=props.masterStore.state.sessionData.subjectareaList;var currentSubject=subjectareas.filter(function(e){return e.id===Number(props.match.params.id);});function handleSubmit(_x){return _handleSubmit.apply(this,arguments);}function _handleSubmit(){_handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var userData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setState(_objectSpread(_objectSpread({},state),{},{loading:true}));userData=props.userStore.fetchUser(props);e.preventDefault();props.masterStore.addSubjectarea(state,userData.access_token);setTimeout(function(){setState(_objectSpread(_objectSpread({},state),{},{name:\"\",price:\"\",loading:false}));},2000);setTimeout(function(){props.history.push({pathname:\"/subjectarea\",state:{status:'created'}});},2000);case 6:case\"end\":return _context.stop();}}},_callee);}));return _handleSubmit.apply(this,arguments);}function handleUpdate(_x2){return _handleUpdate.apply(this,arguments);}function _handleUpdate(){_handleUpdate=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var userData,id;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setState(_objectSpread(_objectSpread({},state),{},{loading:true}));userData=props.userStore.fetchUser(props);e.preventDefault();id=Number(props.match.params.id);props.masterStore.updateSubjectarea(state,userData.access_token,id);setTimeout(function(){setState(_objectSpread(_objectSpread({},state),{},{name:\"\",price:\"\",loading:false}));},2000);setTimeout(function(){props.history.push({pathname:\"/subjectarea\",state:{status:'updated'}});},2000);case 7:case\"end\":return _context2.stop();}}},_callee2);}));return _handleUpdate.apply(this,arguments);}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"page-content\"},/*#__PURE__*/React.createElement(Container,{fluid:true},/*#__PURE__*/React.createElement(Breadcrumbs,{title:props.t(\"Subject Areas\"),breadcrumbItem:props.t(\"Create Subject Areas\")}),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{lg:\"12\"},/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardBody,null,updateSubject===\"\"?/*#__PURE__*/React.createElement(CardTitle,null,\"CREATE SUBJECT AREAS\"):/*#__PURE__*/React.createElement(CardTitle,null,\"UPDATE SUBJECT AREAS\"),/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{lg:\"6\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,null,\"SUBJECT AREAS\"),/*#__PURE__*/React.createElement(Input,{value:state.name,onChange:function onChange(e){return setState(_objectSpread(_objectSpread({},state),{},{name:e.target.value}));},type:\"text\",className:\"form-control\"}))),/*#__PURE__*/React.createElement(Col,{lg:\"6\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,null,\"Price\"),/*#__PURE__*/React.createElement(Input,{value:state.price,onChange:function onChange(e){return setState(_objectSpread(_objectSpread({},state),{},{price:e.target.value}));},type:\"text\",className:\"form-control\"})))),updateSubject===\"\"?/*#__PURE__*/React.createElement(\"div\",{className:\" \"},state.loading?/*#__PURE__*/React.createElement(\"div\",{className:\"spinner-grow text-primary m-1\",role:\"status\"}):/*#__PURE__*/React.createElement(\"button\",_defineProperty({type:\"submit\",className:\"btn btn-primary waves-effect waves-light mx-2\"},\"type\",\"submit\"),\"Post Subject\")):/*#__PURE__*/React.createElement(\"div\",null,state.loading?/*#__PURE__*/React.createElement(\"div\",{className:\"spinner-grow text-primary m-1\",role:\"status\"}):/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary waves-effect waves-light mx-2\",type:\"submit\",onClick:handleUpdate},\"Update Subject\"))))))))));};export default withNamespaces()(stateWrapper(CreateSubjectArea));","map":{"version":3,"sources":["/Users/mac/writingPlatform/src/pages/SuperAdmin/SubjectArea/CreateSubjectArea.js"],"names":["React","useState","useEffect","Container","Row","Col","Card","CardBody","CardTitle","NavItem","NavLink","Label","Input","Form","FormGroup","Link","AvForm","AvField","Button","instance","_","stateWrapper","Breadcrumbs","withNamespaces","CreateSubjectArea","props","name","price","loading","state","setState","updateSubject","setUpdateSubject","SubjectareaData","userData","userStore","fetchUser","masterStore","fetchSubjectarea","access_token","match","params","id","currentSubject","map","e","subjectareas","sessionData","subjectareaList","filter","Number","handleSubmit","preventDefault","addSubjectarea","setTimeout","history","push","pathname","status","handleUpdate","updateSubjectarea","t","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport {\n  Container,\n  Row,\n  Col,\n  Card,\n  CardBody,\n  CardTitle,\n  NavItem,\n  NavLink,\n  Label,\n  Input,\n  Form,\n  FormGroup,\n} from \"reactstrap\";\nimport { Link } from \"react-router-dom\";\n\n// availity-reactstrap-validation\nimport { AvForm, AvField, Button } from \"availity-reactstrap-validation\";\nimport instance from \"../../../helpers/axiosly\";\n\n\n\nimport * as _ from \"lodash\";\nimport stateWrapper from \"../../../containers/provider\";\n\n\n\n// Pages Components\n// import LatestTranaction from \"./LatestTranaction\";\n\n//Import Breadcrumb\nimport Breadcrumbs from \"../../../components/Common/Breadcrumb\";\n\n//i18n\nimport { withNamespaces } from \"react-i18next\";\n\nconst CreateSubjectArea = (props) => {\n\n  const [state, setState] = useState({\n    name: \"\",\n    price: \"\",\n    loading: false\n  });\n\n  const[updateSubject, setUpdateSubject] = useState(\"\");\n\n\n  useEffect(() => {\n    let SubjectareaData, userData;\n    userData = props.userStore.fetchUser(props);\n\n    SubjectareaData = props.masterStore.fetchSubjectarea(\n      userData.access_token\n    );\n\n\n    if(props.match.params.id){\n      setUpdateSubject(\"update\")\n        setState({\n        ...state,\n        name: currentSubject.map(e => {return (e.name)}),\n        price: currentSubject.map(e => {return (e.price)})\n        })\n    } else {\n        setState({\n        ...state,\n        name: '',\n        price: ''\n      })\n      }\n\n\n    //eslint-disable-line\n  }, [])\n\n  let subjectareas = props.masterStore.state.sessionData.subjectareaList;\n\n  let currentSubject = subjectareas.filter((e) => e.id === Number(props.match.params.id))\n\n\n  async function handleSubmit(e) {\n    setState({...state,\n      loading: true,\n    });\n    let  userData;\n    userData = props.userStore.fetchUser(props);\n\n\n    e.preventDefault()\n\n    props.masterStore.addSubjectarea(state, userData.access_token)\n\n    setTimeout(function(){\n      setState({...state,\n        name: \"\",\n        price: \"\",\n        loading: false\n      })\n    }, 2000)\n\n    setTimeout(function(){\n      props.history.push({pathname:\"/subjectarea\", state:{status: 'created'}});\n    }, 2000)\n\n}\n\nasync function handleUpdate(e){\n\n  setState({...state,\n    loading: true,\n  });\n  let  userData;\n  userData = props.userStore.fetchUser(props);\n\n  e.preventDefault()\n    let id = Number(props.match.params.id)\n\n    props.masterStore.updateSubjectarea(state, userData.access_token, id)\n    setTimeout(function(){\n      setState({...state,\n        name: \"\",\n        price: \"\",\n        loading: false\n      })\n    }, 2000)\n\n    setTimeout(function(){\n      props.history.push({pathname:\"/subjectarea\", state:{status: 'updated'}});\n    }, 2000)\n}\n\n  return (\n    <React.Fragment>\n      <div className=\"page-content\">\n        <Container fluid>\n          {/* Render Breadcrumb */}\n          <Breadcrumbs\n            title={props.t(\"Subject Areas\")}\n            breadcrumbItem={props.t(\"Create Subject Areas\")}\n          />\n\n          <Row>\n            <Col lg=\"12\">\n              <Card>\n                <CardBody>\n                  {updateSubject === \"\" ? <CardTitle>CREATE SUBJECT AREAS</CardTitle> :\n                    <CardTitle>UPDATE SUBJECT AREAS</CardTitle>\n                  }\n\n                      <form onSubmit={handleSubmit}>\n                      <Row>\n                        <Col lg=\"6\">\n                          <FormGroup>\n                            <Label>\n                              SUBJECT AREAS\n                            </Label>\n                            <Input\n                              value={state.name}\n                              onChange={(e) =>\n                                setState({ ...state, name: e.target.value })\n                              }\n                              type=\"text\"\n                              className=\"form-control\"\n\n                            />\n                          </FormGroup>\n                        </Col>\n\n                        <Col lg=\"6\">\n                          <FormGroup>\n                            <Label>\n                              Price\n                            </Label>\n                            <Input\n                              value={state.price}\n                              onChange={(e) =>\n                                setState({ ...state, price: e.target.value })\n                              }\n                              type=\"text\"\n                              className=\"form-control\"\n\n                            />\n                          </FormGroup>\n                        </Col>\n                      </Row>\n                       {updateSubject === \"\" ? (\n                         <div className=\" \">\n                           {state.loading ? (\n                           <div\n                           className=\"spinner-grow text-primary m-1\"\n                           role=\"status\"\n                         >\n                           {/* <span className=\"sr-only\">Loading...</span> */}\n                         </div>\n                         ): (\n                          <button\n                           type=\"submit\"\n                           className=\"btn btn-primary waves-effect waves-light mx-2\"\n                           type=\"submit\"\n                         >\n                           Post Subject\n                         </button>\n                         )}\n\n                         </div>\n                       ) :\n                       (\n                        <div>\n                          {state.loading ? (\n                           <div\n                           className=\"spinner-grow text-primary m-1\"\n                           role=\"status\"\n                         >\n                           {/* <span className=\"sr-only\">Loading...</span> */}\n                         </div>\n                         ): (\n                          <button\n                          className=\"btn btn-primary waves-effect waves-light mx-2\"\n                          type=\"submit\"\n                          onClick={handleUpdate}\n                        >\n                          Update Subject\n                        </button>\n                         )}\n\n                      </div>\n                       )}\n\n                    </form>\n\n                </CardBody>\n              </Card>\n            </Col>\n          </Row>\n        </Container>\n      </div>\n    </React.Fragment>\n\n);\n};\n\nexport default withNamespaces()(stateWrapper(CreateSubjectArea));\n"]},"metadata":{},"sourceType":"module"}