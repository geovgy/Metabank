{"ast":null,"code":"var _jsxFileName = \"/Users/mac/writingPlatform/src/pages/Admin/Services/CreateService.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { Container, Row, Col, Card, CardBody, CardTitle, NavItem, NavLink, Label, Input, Form, FormGroup } from \"reactstrap\";\nimport { Link } from \"react-router-dom\"; // availity-reactstrap-validation\n\nimport { AvForm, AvField, Button } from \"availity-reactstrap-validation\";\nimport instance from \"../../../helpers/axiosly\";\nimport * as _ from \"lodash\";\nimport stateWrapper from \"../../../containers/provider\"; // Pages Components\n// import LatestTranaction from \"./LatestTranaction\";\n//Import Breadcrumb\n\nimport Breadcrumbs from \"../../../components/Common/Breadcrumb\"; //i18n\n\nimport { withNamespaces } from \"react-i18next\";\n\nconst CreateService = props => {\n  const [state, setState] = useState({\n    name: \"\",\n    price: \"\",\n    loading: false\n  });\n  const [updateService, setUpdateService] = useState(\"\");\n  useEffect(() => {\n    setState({ ...state,\n      loading: true\n    });\n\n    async function fetchData() {\n      try {\n        const token = localStorage.getItem(\"token\");\n        const res = await instance.get(`${process.env.REACT_APP_DATABASEURL}services`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        setState({ ...state,\n          loading: false\n        });\n        let currentServices = res.data.data.rows;\n        let currentService = currentServices.filter(e => e.id === Number(props.match.params.id));\n        console.log(currentService);\n\n        if (props.match.params.id) {\n          setUpdateService(\"update\");\n          setState({ ...state,\n            name: currentService.map(e => {\n              return e.name;\n            }),\n            price: currentService.map(e => {\n              return e.price;\n            })\n          });\n        } else {\n          setState({ ...state,\n            name: '',\n            price: ''\n          });\n        }\n      } catch (e) {\n        console.log(e);\n      }\n    }\n\n    fetchData(); //eslint-disable-line\n  }, []);\n\n  async function handleSubmit(e) {\n    const token = localStorage.getItem(\"token\");\n    e.preventDefault();\n\n    try {\n      let formData = new FormData();\n      console.log(state.name);\n      let servicename = state.name;\n      let serviceprice = state.price;\n      formData.append(\"name\", servicename);\n      formData.append(\"price\", serviceprice); //state.serviceType);\n\n      for (var key of formData.entries()) {\n        console.log(key[1]);\n      }\n\n      await instance.post(`${process.env.REACT_APP_DATABASEURL}services`, {\n        formData,\n        headers: {\n          \"Content-Type\": \"multipart/form-data\",\n          Authorization: `Bearer ${token}`\n        }\n      }).then(response => {\n        console.log(response.data.data);\n      }).catch(e => console.log(e));\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  async function handleUpdate(e) {\n    const token = localStorage.getItem(\"token\");\n    e.preventDefault();\n\n    try {\n      let formData = new FormData();\n      console.log(state.name);\n      let servicename = state.name;\n      let serviceprice = state.price;\n      let id = Number(props.match.params.id);\n      formData.append(\"name\", servicename);\n      formData.append(\"price\", serviceprice); //state.serviceType);\n\n      for (var key of formData.entries()) {\n        console.log(key[1]);\n      }\n\n      await instance.put(`${process.env.REACT_APP_DATABASEURL}services/${id}`, formData, {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\",\n          Authorization: `Bearer ${token}`\n        }\n      }).then(response => {\n        console.log(response.data.data);\n      }).catch(e => console.log(e));\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"page-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Container, {\n    fluid: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Breadcrumbs, {\n    title: props.t(\"Services\"),\n    breadcrumbItem: props.t(\"Create Service\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: \"12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(CardBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 17\n    }\n  }, updateService === \"\" ? /*#__PURE__*/React.createElement(CardTitle, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 41\n    }\n  }, \"CREATE SERVICE\") : /*#__PURE__*/React.createElement(CardTitle, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 21\n    }\n  }, \"UPDATE SERVICE\"), state.loading ? /*#__PURE__*/React.createElement(\"div\", {\n    class: \"spinner-border\",\n    role: \"status\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    class: \"sr-only\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 19\n    }\n  }, \"Loading...\")) : /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: \"6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(FormGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 27\n    }\n  }, \"Service\"), /*#__PURE__*/React.createElement(Input, {\n    value: state.name,\n    onChange: e => setState({ ...state,\n      name: e.target.value\n    }),\n    type: \"text\",\n    className: \"form-control\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 27\n    }\n  }))), /*#__PURE__*/React.createElement(Col, {\n    lg: \"6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(FormGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 27\n    }\n  }, \"Price\"), /*#__PURE__*/React.createElement(Input, {\n    value: state.price,\n    onChange: e => setState({ ...state,\n      price: e.target.value\n    }),\n    type: \"text\",\n    className: \"form-control\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 27\n    }\n  })))), updateService === \"\" ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \" \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 24\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"btn btn-primary waves-effect waves-light mx-2\",\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 24\n    }\n  }, \"Post Service\")) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-primary waves-effect waves-light mx-2\",\n    type: \"submit\",\n    onClick: handleUpdate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 23\n    }\n  }, \"Update Service\"))))))))));\n};\n\nexport default withNamespaces()(stateWrapper(CreateService));","map":{"version":3,"sources":["/Users/mac/writingPlatform/src/pages/Admin/Services/CreateService.js"],"names":["React","useState","useEffect","Container","Row","Col","Card","CardBody","CardTitle","NavItem","NavLink","Label","Input","Form","FormGroup","Link","AvForm","AvField","Button","instance","_","stateWrapper","Breadcrumbs","withNamespaces","CreateService","props","state","setState","name","price","loading","updateService","setUpdateService","fetchData","token","localStorage","getItem","res","get","process","env","REACT_APP_DATABASEURL","headers","Authorization","currentServices","data","rows","currentService","filter","e","id","Number","match","params","console","log","map","handleSubmit","preventDefault","formData","FormData","servicename","serviceprice","append","key","entries","post","then","response","catch","handleUpdate","put","t","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport {\n  Container,\n  Row,\n  Col,\n  Card,\n  CardBody,\n  CardTitle,\n  NavItem,\n  NavLink,\n  Label,\n  Input,\n  Form,\n  FormGroup,\n} from \"reactstrap\";\nimport { Link } from \"react-router-dom\";\n\n// availity-reactstrap-validation\nimport { AvForm, AvField, Button } from \"availity-reactstrap-validation\";\nimport instance from \"../../../helpers/axiosly\";\n\n\n\nimport * as _ from \"lodash\";\nimport stateWrapper from \"../../../containers/provider\";\n\n\n\n// Pages Components\n// import LatestTranaction from \"./LatestTranaction\";\n\n//Import Breadcrumb\nimport Breadcrumbs from \"../../../components/Common/Breadcrumb\";\n\n//i18n\nimport { withNamespaces } from \"react-i18next\";\n\nconst CreateService = (props) => {\n\n  const [state, setState] = useState({\n    name: \"\",\n    price: \"\",\n    loading: false\n  });\n\n  const[updateService, setUpdateService] = useState(\"\");\n\n\n\n\n  useEffect(() => {\n    setState({...state, loading: true})\n    async function fetchData(){\n        try {\n          const token = localStorage.getItem(\"token\")\n          const res = await instance\n            .get(`${process.env.REACT_APP_DATABASEURL}services`, {\n              headers: {\n                Authorization: `Bearer ${token}`,\n              },\n            })\n            setState({...state, loading: false})\n            let currentServices = res.data.data.rows\n\n            let currentService = currentServices.filter((e) => e.id === Number(props.match.params.id))\n\n           console.log(currentService)\n\n          if(props.match.params.id){\n            setUpdateService(\"update\")\n              setState({\n              ...state,\n              name: currentService.map(e => {return (e.name)}),\n              price: currentService.map(e => {return (e.price)})\n              })\n          } else {\n              setState({\n              ...state,\n              name: '',\n              price: ''\n            })\n            }\n\n        } catch (e) {\n          console.log(e);\n        }\n        }\n        fetchData();\n\n\n    //eslint-disable-line\n  }, [])\n\n\n\n\n  async function handleSubmit(e) {\n    const token = localStorage.getItem(\"token\")\n    e.preventDefault()\n    try {\n      let formData = new FormData();\n      console.log(state.name)\n      let servicename = state.name\n      let serviceprice = state.price\n      formData.append(\"name\", servicename);\n      formData.append(\"price\", serviceprice); //state.serviceType);\n\n      for(var key of formData.entries()){\n        console.log(key[1])\n      }\n      await instance\n          .post(`${process.env.REACT_APP_DATABASEURL}services`, { formData,\n            headers: {\n              \"Content-Type\": \"multipart/form-data\",\n              Authorization: `Bearer ${token}`,\n            },\n          }).then((response) => {\n              console.log(response.data.data)})\n              .catch((e) => console.log(e));\n\n\n    }\n     catch (e) {\n      console.log(e);\n    }\n}\n\n  async function handleUpdate(e){\n  const token = localStorage.getItem(\"token\")\n  e.preventDefault()\n  try {\n    let formData = new FormData();\n    console.log(state.name)\n    let servicename = state.name\n    let serviceprice = state.price\n    let id = Number(props.match.params.id)\n    formData.append(\"name\", servicename);\n    formData.append(\"price\", serviceprice ); //state.serviceType);\n\n    for(var key of formData.entries()){\n      console.log(key[1])\n    }\n    await instance\n        .put(`${process.env.REACT_APP_DATABASEURL}services/${id}`, formData, {\n          headers: {\n            \"Content-Type\": \"multipart/form-data\",\n            Authorization: `Bearer ${token}`,\n          },\n        }).then((response) => {\n            console.log(response.data.data)})\n            .catch((e) => console.log(e));\n\n\n  }\n   catch (e) {\n    console.log(e);\n  }\n}\n\n  return (\n    <React.Fragment>\n      <div className=\"page-content\">\n        <Container fluid>\n          {/* Render Breadcrumb */}\n          <Breadcrumbs\n            title={props.t(\"Services\")}\n            breadcrumbItem={props.t(\"Create Service\")}\n          />\n\n          <Row>\n            <Col lg=\"12\">\n              <Card>\n                <CardBody>\n                {updateService === \"\" ? <CardTitle>CREATE SERVICE</CardTitle> :\n                    <CardTitle>UPDATE SERVICE</CardTitle>\n                  }\n                  {state.loading ? (<div class=\"spinner-border\" role=\"status\">\n                  <span class=\"sr-only\">Loading...</span>\n                  </div>):(\n                    <form onSubmit={handleSubmit}>\n                    <Row>\n                      <Col lg=\"6\">\n                        <FormGroup>\n                          <Label>\n                            Service\n                          </Label>\n                          <Input\n                            value={state.name}\n                            onChange={(e) =>\n                              setState({ ...state, name: e.target.value })\n                            }\n                            type=\"text\"\n                            className=\"form-control\"\n\n                          />\n                        </FormGroup>\n                      </Col>\n\n                      <Col lg=\"6\">\n                        <FormGroup>\n                          <Label>\n                            Price\n                          </Label>\n                          <Input\n                            value={state.price}\n                            onChange={(e) =>\n                              setState({ ...state, price: e.target.value })\n                            }\n                            type=\"text\"\n                            className=\"form-control\"\n\n                          />\n                        </FormGroup>\n                      </Col>\n                    </Row>\n                     {updateService === \"\" ? (\n                       <div className=\" \">\n                       <button\n                         type=\"submit\"\n                         className=\"btn btn-primary waves-effect waves-light mx-2\"\n                         type=\"submit\"\n                       >\n                         Post Service\n                       </button>\n                       </div>\n                     ) : (\n                      <div>\n                      <button\n                        className=\"btn btn-primary waves-effect waves-light mx-2\"\n                        type=\"submit\"\n                        onClick={handleUpdate}\n                      >\n                        Update Service\n                      </button>\n                    </div>\n                     )}\n\n\n\n                  </form>\n                  )}\n\n                </CardBody>\n              </Card>\n            </Col>\n          </Row>\n        </Container>\n      </div>\n    </React.Fragment>\n\n);\n};\n\nexport default withNamespaces()(stateWrapper(CreateService));\n"]},"metadata":{},"sourceType":"module"}