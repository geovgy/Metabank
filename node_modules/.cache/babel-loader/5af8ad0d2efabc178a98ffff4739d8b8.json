{"ast":null,"code":"import _classCallCheck from\"/Users/mac/writingPlatform/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _inherits from\"/Users/mac/writingPlatform/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/mac/writingPlatform/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{Container}from\"unstated\";import instance from\"../helpers/axiosly\";import CONSTANTS from\"../helpers/App.constant\";import{setDefaults}from\"react-i18next\";import{LOCAL_STORAGE_SIGNIN_KEY}from'../App.constants';var OrderContainer=/*#__PURE__*/function(_Container){_inherits(OrderContainer,_Container);var _super=_createSuper(OrderContainer);function OrderContainer(){var _this;_classCallCheck(this,OrderContainer);_this=_super.call(this);_this.goBack=function(props){props.history.goBack();};_this.fetchOrders=function(userData,bearertoken){// console.log(userData, bearertoken);\nvar token=localStorage.getItem(\"token\");// console.log(userData)\n// console.log(token)\n// console.log(bearertoken)\nvar userId=userData.id;// console.log(\"check token id\", userId);\ninstance.get(\"\".concat(process.env.REACT_APP_DATABASEURL,\"order\"),{headers:{Authorization:\"Bearer \".concat(bearertoken)}}).then(function(response){console.log(response.data.data);// count order list by user\nvar orderListCount=response.data.data.rows.reduce(function(counter,obj){return obj.UserId===userId?counter+=1:counter;},0);// Calculate Total balance by user\n// console.log(\"list\", response.data.data.rows);\nvar orderList=_this.state.sessionData.orderList;// console.log(response)\n// console.log(\"count orders by user :\", orderListCount);\n// console.log(\"api for orderList no:\", obj.UserId);\n// console.log(\"api for orderList no:\", obj.topic);\n_this.setState({sessionData:{/*topic: obj.topic,\n                numberOfOrders: orderListCount,\n                completedOrders: 0,\n                totalBalance: obj.balance,*/ // newArr.push.apply(newArr, arr)\norderList:response.data.data.rows}});console.log(_this.state.sessionData.orderList);}).catch(function(e){return console.log(e);});};_this.state={sessionData:{user:null,accessToken:\"\",userId:-1,topic:\"\",orderList:[],numberOfOrders:0,completedOrders:0,totalBalance:0}};return _this;}// signIn = ({ email, password }, props) => {\n//   instance\n//     .post(`${process.env.REACT_APP_DATABASEURL}/auth/login`, { email, password })\n//     .then((response) => {\n//       console.log(response.data.data);\n//       localStorage.setItem(\"authUser\", JSON.stringify(response.data.data));\n//       console.log(\"local storage data\", localStorage.getItem(\"authUser\"));\n//       props.history.push(\"/dashboard\");\n//     })\n//     .catch((e) => {\n//       console.log(e);\n//     });\n// };\nreturn OrderContainer;}(Container);export{OrderContainer};","map":{"version":3,"sources":["/Users/mac/writingPlatform/src/containers/OrderContainer.js"],"names":["Container","instance","CONSTANTS","setDefaults","LOCAL_STORAGE_SIGNIN_KEY","OrderContainer","goBack","props","history","fetchOrders","userData","bearertoken","token","localStorage","getItem","userId","id","get","process","env","REACT_APP_DATABASEURL","headers","Authorization","then","response","console","log","data","orderListCount","rows","reduce","counter","obj","UserId","orderList","state","sessionData","setState","catch","e","user","accessToken","topic","numberOfOrders","completedOrders","totalBalance"],"mappings":"uaAAA,OAASA,SAAT,KAA0B,UAA1B,CACA,MAAOC,CAAAA,QAAP,KAAqB,oBAArB,CACA,MAAOC,CAAAA,SAAP,KAAsB,yBAAtB,CACA,OAASC,WAAT,KAA4B,eAA5B,CACA,OAAQC,wBAAR,KAAuC,kBAAvC,C,GAGMC,CAAAA,c,gHACJ,yBAAc,gDACZ,wBADY,MAedC,MAfc,CAeL,SAACC,KAAD,CAAW,CAClBA,KAAK,CAACC,OAAN,CAAcF,MAAd,GACD,CAjBa,OAmBdG,WAnBc,CAmBA,SAACC,QAAD,CAAWC,WAAX,CAA2B,CACvC;AACA,GAAMC,CAAAA,KAAK,CAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd,CACA;AACA;AACA;AACA,GAAMC,CAAAA,MAAM,CAAGL,QAAQ,CAACM,EAAxB,CACA;AACAf,QAAQ,CACLgB,GADH,WACUC,OAAO,CAACC,GAAR,CAAYC,qBADtB,UACoD,CAChDC,OAAO,CAAE,CACPC,aAAa,kBAAYX,WAAZ,CADN,CADuC,CADpD,EAMGY,IANH,CAMQ,SAACC,QAAD,CAAc,CAClBC,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAACG,IAAT,CAAcA,IAA1B,EACA;AACA,GAAMC,CAAAA,cAAc,CAAGJ,QAAQ,CAACG,IAAT,CAAcA,IAAd,CAAmBE,IAAnB,CAAwBC,MAAxB,CACrB,SAACC,OAAD,CAAUC,GAAV,QAAmBA,CAAAA,GAAG,CAACC,MAAJ,GAAelB,MAAf,CAAyBgB,OAAO,EAAI,CAApC,CAAyCA,OAA5D,EADqB,CAErB,CAFqB,CAAvB,CAIA;AAEA;AACA,GAAIG,CAAAA,SAAS,CAAG,MAAKC,KAAL,CAAWC,WAAX,CAAuBF,SAAvC,CAEE;AACF;AAII;AACA;AAEA,MAAKG,QAAL,CAAc,CACZD,WAAW,CAAE,CACX;AAChB;AACA;AACA,4CAJ2B,CAKX;AACAF,SAAS,CAAEV,QAAQ,CAACG,IAAT,CAAcA,IAAd,CAAmBE,IANnB,CADD,CAAd,EAUAJ,OAAO,CAACC,GAAR,CAAY,MAAKS,KAAL,CAAWC,WAAX,CAAuBF,SAAnC,EAGL,CAvCH,EAyCGI,KAzCH,CAyCS,SAACC,CAAD,QAAOd,CAAAA,OAAO,CAACC,GAAR,CAAYa,CAAZ,CAAP,EAzCT,EA0CD,CArEa,CAEZ,MAAKJ,KAAL,CAAa,CACXC,WAAW,CAAE,CACXI,IAAI,CAAE,IADK,CAEXC,WAAW,CAAE,EAFF,CAGX1B,MAAM,CAAE,CAAC,CAHE,CAIX2B,KAAK,CAAE,EAJI,CAKXR,SAAS,CAAE,EALA,CAMXS,cAAc,CAAE,CANL,CAOXC,eAAe,CAAE,CAPN,CAQXC,YAAY,CAAE,CARH,CADF,CAAb,CAFY,aAcb,CAyDD;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;wBArF2B7C,S,EAwF7B,OAASK,cAAT","sourcesContent":["import { Container } from \"unstated\";\nimport instance from \"../helpers/axiosly\";\nimport CONSTANTS from \"../helpers/App.constant\";\nimport { setDefaults } from \"react-i18next\";\nimport {LOCAL_STORAGE_SIGNIN_KEY} from '../App.constants'\n\n\nclass OrderContainer extends Container {\n  constructor() {\n    super();\n    this.state = {\n      sessionData: {\n        user: null,\n        accessToken: \"\",\n        userId: -1,\n        topic: \"\",\n        orderList: [],\n        numberOfOrders: 0,\n        completedOrders: 0,\n        totalBalance: 0,\n      },\n    };\n  }\n  goBack = (props) => {\n    props.history.goBack();\n  };\n\n  fetchOrders = (userData, bearertoken) => {\n    // console.log(userData, bearertoken);\n    const token = localStorage.getItem(\"token\")\n    // console.log(userData)\n    // console.log(token)\n    // console.log(bearertoken)\n    const userId = userData.id;\n    // console.log(\"check token id\", userId);\n    instance\n      .get(`${process.env.REACT_APP_DATABASEURL}order`, {\n        headers: {\n          Authorization: `Bearer ${bearertoken}`,\n        },\n      })\n      .then((response) => {\n        console.log(response.data.data)\n        // count order list by user\n        const orderListCount = response.data.data.rows.reduce(\n          (counter, obj) => (obj.UserId === userId ? (counter += 1) : counter),\n          0\n        );\n        // Calculate Total balance by user\n\n        // console.log(\"list\", response.data.data.rows);\n        let orderList = this.state.sessionData.orderList;\n\n          // console.log(response)\n        // console.log(\"count orders by user :\", orderListCount);\n\n\n\n            // console.log(\"api for orderList no:\", obj.UserId);\n            // console.log(\"api for orderList no:\", obj.topic);\n\n            this.setState({\n              sessionData: {\n                /*topic: obj.topic,\n                numberOfOrders: orderListCount,\n                completedOrders: 0,\n                totalBalance: obj.balance,*/\n                // newArr.push.apply(newArr, arr)\n                orderList: response.data.data.rows,\n              },\n            });\n            console.log(this.state.sessionData.orderList)\n\n\n      })\n\n      .catch((e) => console.log(e));\n  };\n\n  // signIn = ({ email, password }, props) => {\n  //   instance\n  //     .post(`${process.env.REACT_APP_DATABASEURL}/auth/login`, { email, password })\n  //     .then((response) => {\n  //       console.log(response.data.data);\n  //       localStorage.setItem(\"authUser\", JSON.stringify(response.data.data));\n\n  //       console.log(\"local storage data\", localStorage.getItem(\"authUser\"));\n  //       props.history.push(\"/dashboard\");\n  //     })\n  //     .catch((e) => {\n  //       console.log(e);\n  //     });\n  // };\n}\n\nexport { OrderContainer };\n"]},"metadata":{},"sourceType":"module"}