{"ast":null,"code":"import _regeneratorRuntime from\"/Users/mac/writingPlatform/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _createForOfIteratorHelper from\"/Users/mac/writingPlatform/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _asyncToGenerator from\"/Users/mac/writingPlatform/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/mac/writingPlatform/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/mac/writingPlatform/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/mac/writingPlatform/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{Container,Row,Col,Button,Card,CardBody,CardTitle,Modal,ModalHeader,ModalBody,ModalFooter,Media,Table,NavItem,NavLink,TabContent,TabPane,FormGroup,Label,Input}from\"reactstrap\";import classnames from\"classnames\";import{Link}from\"react-router-dom\";//Import Breadcrumb\nimport Breadcrumbs from\"../../../components/Common/Breadcrumb\";//i18n\nimport{withNamespaces}from\"react-i18next\";import AvForm from\"availity-reactstrap-validation/lib/AvForm\";import Dropzone from\"react-dropzone\";import stateWrapper from\"../../../containers/provider\";import instance from\"../../../helpers/axiosly\";var Library=function Library(props){var _useState=useState(1),_useState2=_slicedToArray(_useState,2),activeTab=_useState2[0],setactiveTab=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),selectedFiles=_useState4[0],setselectedFiles=_useState4[1];var _useState5=useState({title:\"\",description:\"\",additionMaterial:\"\",loading:false}),_useState6=_slicedToArray(_useState5,2),state=_useState6[0],setState=_useState6[1];var onChange=function onChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setState(_objectSpread(_objectSpread({},state),{},_defineProperty({},name,value)));};function formatBytes(bytes){var decimals=arguments.length>1&&arguments[1]!==undefined?arguments[1]:2;if(bytes===0)return\"0 Bytes\";var k=1024;var dm=decimals<0?0:decimals;var sizes=[\"Bytes\",\"KB\",\"MB\",\"GB\",\"TB\",\"PB\",\"EB\",\"ZB\",\"YB\"];var i=Math.floor(Math.log(bytes)/Math.log(k));return parseFloat((bytes/Math.pow(k,i)).toFixed(dm))+\" \"+sizes[i];}function handleAcceptedFiles(files){setState({loading:true});files.map(function(file){return Object.assign(file,{preview:URL.createObjectURL(file),formattedSize:formatBytes(file.size)});});setselectedFiles(files);setTimeout(function(){setState({loading:false});},1000);}function handleValidSubmit(_x,_x2){return _handleValidSubmit.apply(this,arguments);}function _handleValidSubmit(){_handleValidSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event,values){var form,_iterator,_step,key,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:form=new FormData();form.append(\"title\",state.title);form.append(\"description\",state.description);form.append(\"file\",selectedFiles[0]);_iterator=_createForOfIteratorHelper(form.entries());try{for(_iterator.s();!(_step=_iterator.n()).done;){key=_step.value;console.log(key[1]);}}catch(err){_iterator.e(err);}finally{_iterator.f();}_context.next=8;return instance.post(\"https://api.electrikrecharge.com/library\",form,{headers:{\"Content-Type\":\"multipart/form-data\",Authorization:\"Bearer \".concat(props.userStore.state.sessionData.accessToken)}}).then(function(response){console.log(response.data);}).catch(function(e){return console.log(e);});case 8:result=_context.sent;setState({title:\"\",description:\"\"});setselectedFiles([]);case 11:case\"end\":return _context.stop();}}},_callee);}));return _handleValidSubmit.apply(this,arguments);}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"page-content\"},/*#__PURE__*/React.createElement(Container,{fluid:true},/*#__PURE__*/React.createElement(Breadcrumbs,{title:props.t(\"Library\"),breadcrumbItem:props.t(\"Library\")}),/*#__PURE__*/React.createElement(AvForm,{className:\"form-horizontal\",onValidSubmit:function onValidSubmit(e,v){handleValidSubmit(e,v);}},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{lg:\"12\"},/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(\"div\",{id:\"basic-pills-wizard\",className:\"twitter-bs-wizard\"},/*#__PURE__*/React.createElement(\"ul\",{className:\"twitter-bs-wizard-nav nav nav-justified nav-pills\"},/*#__PURE__*/React.createElement(NavItem,null,/*#__PURE__*/React.createElement(NavLink,{className:classnames({active:activeTab===1}),onClick:function onClick(){setactiveTab(1);}},/*#__PURE__*/React.createElement(\"span\",{className:\"step-number mr-2\"},\"01\"),\"Library Details\"))),/*#__PURE__*/React.createElement(TabContent,{activeTab:activeTab,className:\"twitter-bs-wizard-tab-content\"},/*#__PURE__*/React.createElement(TabPane,{tabId:1},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{lg:\"12\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,{for:\"basicpill-firstname-input14\"},\"library Title\"),/*#__PURE__*/React.createElement(Input,{value:state.title,onChange:onChange,name:\"title\",type:\"text\",id:\"basicpill-firstname-input14\",className:\"form-control\"})))),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{lg:\"6\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,{for:\"basicpill-address-input2\"},\"DESCRIPTION\"),/*#__PURE__*/React.createElement(\"textarea\",{value:state.description,onChange:onChange,name:\"description\",id:\"basicpill-address-input2\",className:\"form-control\",rows:\"11\"}))),/*#__PURE__*/React.createElement(Col,{lg:\"6\"},/*#__PURE__*/React.createElement(Label,{for:\"basicpill-address-input2\"},\"ADDITION MATERIAL\"),/*#__PURE__*/React.createElement(Dropzone,{onDrop:function onDrop(acceptedFiles){handleAcceptedFiles(acceptedFiles);}},function(_ref){var getRootProps=_ref.getRootProps,getInputProps=_ref.getInputProps;return/*#__PURE__*/React.createElement(\"div\",{className:\"dropzone\"},/*#__PURE__*/React.createElement(\"div\",Object.assign({className:\"dz-message needclick mt-2\"},getRootProps()),/*#__PURE__*/React.createElement(\"input\",Object.assign({},getInputProps(),{onChange:selectedFiles})),/*#__PURE__*/React.createElement(\"div\",{className:\"mb-3\"},/*#__PURE__*/React.createElement(\"i\",{className:\"display-4 text-muted bx bxs-cloud-upload\"})),/*#__PURE__*/React.createElement(\"h5\",null,\"Drop files here or click to upload.\")));}),/*#__PURE__*/React.createElement(\"div\",{className:\"dropzone-previews mt-3\",id:\"file-previews\"},state.loading?/*#__PURE__*/React.createElement(\"div\",{class:\"spinner-border\",role:\"status\"},/*#__PURE__*/React.createElement(\"span\",{class:\"sr-only\"},\"Loading...\")):selectedFiles.map(function(f,i){return/*#__PURE__*/React.createElement(Card,{key:i+\"-file\",className:\"mt-1 mb-0 shadow-none border dz-processing dz-image-preview dz-success dz-complete\"},/*#__PURE__*/React.createElement(\"div\",{className:\"p-2\"},/*#__PURE__*/React.createElement(Row,{className:\"align-items-center\"},/*#__PURE__*/React.createElement(Col,{className:\"col-auto\"},/*#__PURE__*/React.createElement(\"img\",{\"data-dz-thumbnail\":\"\",height:\"80\",className:\"avatar-sm rounded bg-light\",alt:f.name,src:f.preview})),/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Link,{to:\"#\",className:\"text-muted font-weight-bold\"},f.name),/*#__PURE__*/React.createElement(\"p\",{className:\"mb-0\"},/*#__PURE__*/React.createElement(\"strong\",null,f.formattedSize))))));}))))))),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-warning waves-effect waves-light\"},\"Submit\")))))))));};export default withNamespaces()(stateWrapper(Library));","map":{"version":3,"sources":["/Users/mac/writingPlatform/src/pages/Admin/Library/index.js"],"names":["React","useState","Container","Row","Col","Button","Card","CardBody","CardTitle","Modal","ModalHeader","ModalBody","ModalFooter","Media","Table","NavItem","NavLink","TabContent","TabPane","FormGroup","Label","Input","classnames","Link","Breadcrumbs","withNamespaces","AvForm","Dropzone","stateWrapper","instance","Library","props","activeTab","setactiveTab","selectedFiles","setselectedFiles","title","description","additionMaterial","loading","state","setState","onChange","e","target","name","value","formatBytes","bytes","decimals","k","dm","sizes","i","Math","floor","log","parseFloat","pow","toFixed","handleAcceptedFiles","files","map","file","Object","assign","preview","URL","createObjectURL","formattedSize","size","setTimeout","handleValidSubmit","event","values","form","FormData","append","entries","key","console","post","headers","Authorization","userStore","sessionData","accessToken","then","response","data","catch","result","t","v","active","acceptedFiles","getRootProps","getInputProps","f"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport {\n  Container,\n  Row,\n  Col,\n  Button,\n  Card,\n  CardBody,\n  CardTitle,\n  Modal,\n  ModalHeader,\n  ModalBody,\n  ModalFooter,\n  Media,\n  Table,\n  NavItem,\n  NavLink,\n  TabContent,\n  TabPane,\n  FormGroup,\n  Label,\n  Input,\n} from \"reactstrap\";\nimport classnames from \"classnames\";\nimport { Link } from \"react-router-dom\";\n//Import Breadcrumb\nimport Breadcrumbs from \"../../../components/Common/Breadcrumb\";\n\n//i18n\nimport { withNamespaces } from \"react-i18next\";\nimport AvForm from \"availity-reactstrap-validation/lib/AvForm\";\nimport Dropzone from \"react-dropzone\";\n\nimport stateWrapper from \"../../../containers/provider\";\n\nimport instance from \"../../../helpers/axiosly\";\n\nconst Library = (props) => {\n\n  const[activeTab, setactiveTab] = useState(1)\n  const [selectedFiles, setselectedFiles] = useState([]);\n\n  const [state, setState] = useState({\n    title: \"\",\n    description: \"\",\n    additionMaterial: \"\",\n    loading: false\n  })\n\n  const onChange = (e) => {\n    let { name, value } = e.target;\n    setState({\n      ...state,\n      [name]: value,\n    });\n  }\n\n  function formatBytes(bytes, decimals = 2) {\n    if (bytes === 0) return \"0 Bytes\";\n    const k = 1024;\n    const dm = decimals < 0 ? 0 : decimals;\n    const sizes = [\"Bytes\", \"KB\", \"MB\", \"GB\", \"TB\", \"PB\", \"EB\", \"ZB\", \"YB\"];\n\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + \" \" + sizes[i];\n  }\n\n\n\n  function handleAcceptedFiles(files) {\n    setState({\n        loading: true,\n      });\n\n    files.map((file) =>\n      Object.assign(file, {\n        preview: URL.createObjectURL(file),\n        formattedSize: formatBytes(file.size),\n      })\n    );\n    setselectedFiles(files);\n    setTimeout(function(){\n        setState({loading: false})\n    }, 1000)\n\n  }\n\n  async function handleValidSubmit(event, values) {\n    const form = new FormData();\n\n    form.append(\"title\", state.title);\n    form.append(\"description\", state.description);\n    form.append(\"file\", selectedFiles[0]);\n\n    for(var key of form.entries()){\n      console.log(key[1])\n    }\n\n    const result = await instance\n    .post(\"https://api.electrikrecharge.com/library\", form, {\n      headers: {\n        \"Content-Type\": \"multipart/form-data\",\n        Authorization: `Bearer ${props.userStore.state.sessionData.accessToken}`,\n      },\n    })\n    .then((response) => {\n      console.log(response.data);\n\n    })\n    .catch((e) => console.log(e));\n\n    setState({\n        title: \"\",\n        description: \"\"\n      });\n\n      setselectedFiles([])\n  }\n\n  return (\n    <React.Fragment>\n      <div className=\"page-content\">\n        <Container fluid>\n          {/* Render Breadcrumb */}\n          <Breadcrumbs\n            title={props.t(\"Library\")}\n            breadcrumbItem={props.t(\"Library\")}\n          />\n           <AvForm\n           className=\"form-horizontal\"\n           onValidSubmit={(e, v) => {\n             handleValidSubmit(e, v);\n           }}\n           >\n            <Row>\n              <Col lg=\"12\">\n                <Card>\n                  <CardBody>\n\n\n                  <div id=\"basic-pills-wizard\" className=\"twitter-bs-wizard\">\n                  <ul className=\"twitter-bs-wizard-nav nav nav-justified nav-pills\">\n                    <NavItem>\n                      <NavLink\n                        className={classnames({active: activeTab === 1})}\n                        onClick={() => {\n                          setactiveTab(1)\n                        }}\n                      >\n                        <span className=\"step-number mr-2\">01</span>\n                        Library Details\n                      </NavLink>\n                    </NavItem>\n                  </ul>\n                  <TabContent\n                    activeTab={activeTab}\n                    className=\"twitter-bs-wizard-tab-content\"\n                  >\n                    <TabPane tabId={1}>\n                     <Row>\n                      <Col lg=\"12\">\n                        <FormGroup>\n                          <Label for=\"basicpill-firstname-input14\">\n                            library Title\n                          </Label>\n                          <Input\n                             value={state.title}\n                             onChange={onChange}\n                             name=\"title\"\n                            type=\"text\"\n                            id=\"basicpill-firstname-input14\"\n                            className=\"form-control\"\n                          />\n                        </FormGroup>\n                      </Col>\n                      </Row>\n                      <Row>\n                        <Col lg=\"6\">\n                        <FormGroup>\n                            <Label for=\"basicpill-address-input2\">\n                              DESCRIPTION\n                            </Label>\n                            <textarea\n                               value={state.description}\n                               onChange={onChange}\n                              name=\"description\"\n                              id=\"basicpill-address-input2\"\n                              className=\"form-control\"\n                              rows=\"11\"\n                            ></textarea>\n                          </FormGroup>\n                        </Col>\n                        <Col lg=\"6\">\n                        <Label for=\"basicpill-address-input2\">\n                              ADDITION MATERIAL\n                            </Label>\n                            <Dropzone\n                              onDrop={(acceptedFiles) => {\n                                handleAcceptedFiles(acceptedFiles);\n                              }}\n                            >\n                              {({getRootProps, getInputProps}) => (\n                                  <div className=\"dropzone\">\n                                  <div className=\"dz-message needclick mt-2\" {...getRootProps()}>\n                                    <input {...getInputProps()} onChange={selectedFiles}/>\n                                    <div className=\"mb-3\">\n                                    <i className=\"display-4 text-muted bx bxs-cloud-upload\"></i>\n                                    </div>\n                                    <h5>\n                                        Drop files here or click to upload.\n                                      </h5>\n                                  </div>\n                                </div>\n                              )}\n\n                            </Dropzone>\n                            <div className=\"dropzone-previews mt-3\" id=\"file-previews\">\n                                {state.loading ? (<div class=\"spinner-border\" role=\"status\">\n                                    <span class=\"sr-only\">Loading...</span>\n                                    </div>) : selectedFiles.map((f, i) => {\n                                  return (\n                                    <Card key={i + \"-file\"} className=\"mt-1 mb-0 shadow-none border dz-processing dz-image-preview dz-success dz-complete\">\n                                       <div className=\"p-2\">\n                                        <Row className=\"align-items-center\">\n                                          <Col className=\"col-auto\">\n                                            <img\n                                              data-dz-thumbnail=\"\"\n                                              height=\"80\"\n                                              className=\"avatar-sm rounded bg-light\"\n                                              alt={f.name}\n                                              src={f.preview}\n                                            />\n                                          </Col>\n                                          <Col>\n                                            <Link\n                                              to=\"#\"\n                                              className=\"text-muted font-weight-bold\"\n                                            >\n                                              {f.name}\n                                            </Link>\n                                            <p className=\"mb-0\">\n                                              <strong>{f.formattedSize}</strong>\n                                            </p>\n                                          </Col>\n                                        </Row>\n                                      </div>\n\n                                    </Card>\n                                  )\n                                })}\n                            </div>\n                        </Col>\n                      </Row>\n                    </TabPane>\n                  </TabContent>\n                  </div>\n                  <button\n                      type=\"submit\"\n                      className=\"btn btn-warning waves-effect waves-light\"\n                    >\n                      Submit\n                    </button>\n                  </CardBody>\n                </Card>\n              </Col>\n            </Row>\n          </AvForm>\n          </Container>\n          </div>\n    </React.Fragment>\n  );\n};\n\nexport default withNamespaces()(stateWrapper(Library));\n"]},"metadata":{},"sourceType":"module"}