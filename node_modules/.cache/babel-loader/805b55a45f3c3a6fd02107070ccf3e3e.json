{"ast":null,"code":"var _jsxFileName = \"/Users/mac/writingPlatform/src/pages/Writer/Projects/SubmitProject.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { Container, Row, Col, Button, Card, CardBody, NavItem, NavLink, TabContent, TabPane, FormGroup, Label, Input } from \"reactstrap\";\nimport classnames from \"classnames\";\nimport { Link } from \"react-router-dom\"; //Import Breadcrumb\n\nimport Breadcrumbs from \"../../../components/Common/Breadcrumb\"; //i18n\n\nimport { withNamespaces } from \"react-i18next\";\nimport AvForm from \"availity-reactstrap-validation/lib/AvForm\";\nimport Dropzone from \"react-dropzone\";\nimport stateWrapper from \"../../../containers/provider\";\nimport instance from \"../../../helpers/axiosly\";\n\nconst SubmitProject = props => {\n  const [activeTab, setactiveTab] = useState(1);\n  const [selectedFiles, setselectedFiles] = useState([]);\n  const [state, setState] = useState({\n    title: \"submitted title\",\n    description: \"\",\n    additionMaterial: \"\",\n    loading: false,\n    userData: null\n  });\n\n  const onChange = e => {// let { name, value } = e.target;\n    // setState({\n    //     ...state,\n    //     [name]: value,\n    // });\n  };\n\n  useEffect(() => {\n    var _userData;\n\n    let userData;\n    userData = props.userStore.fetchUser(props);\n    ;\n    console.log(userData);\n    console.log((_userData = userData) === null || _userData === void 0 ? void 0 : _userData.access_token);\n    console.log(state.title);\n    setState({\n      userData: userData\n    }); //eslint-disable-line\n  }, []); //   \n\n  function formatBytes(bytes, decimals = 2) {\n    if (bytes === 0) return \"0 Bytes\";\n    const k = 1024;\n    const dm = decimals < 0 ? 0 : decimals;\n    const sizes = [\"Bytes\", \"KB\", \"MB\", \"GB\", \"TB\", \"PB\", \"EB\", \"ZB\", \"YB\"];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + \" \" + sizes[i];\n  }\n\n  function handleAcceptedFiles(files) {\n    setState({\n      loading: true\n    });\n    files.map(file => Object.assign(file, {\n      preview: URL.createObjectURL(file),\n      formattedSize: formatBytes(file.size)\n    }));\n    setselectedFiles(files);\n    setTimeout(function () {\n      setState({\n        loading: false\n      });\n    }, 500);\n  }\n\n  async function handleValidSubmit(event, values) {\n    try {\n      var _userData2, _state$userData, _state$userData2, _state$userData3;\n\n      userData = await props.userStore.fetchUser(props);\n      ;\n      console.log(userData);\n      console.log((_userData2 = userData) === null || _userData2 === void 0 ? void 0 : _userData2.access_token);\n      console.log(state === null || state === void 0 ? void 0 : (_state$userData = state.userData) === null || _state$userData === void 0 ? void 0 : _state$userData.id);\n      console.log(state === null || state === void 0 ? void 0 : state.userData);\n      const form = new FormData();\n      console.log();\n      form.append(\"text\", state.title);\n      form.append(\"description\", state.description);\n      form.append(\"file\", selectedFiles[0]); // for (var key of form.entries()) {\n      //     console.log(key[1])\n      // }\n\n      const result = await instance.post(`${'https://api.electrikrecharge.com/'}/${state === null || state === void 0 ? void 0 : (_state$userData2 = state.userData) === null || _state$userData2 === void 0 ? void 0 : _state$userData2.id}/submit`, form, {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\",\n          Authorization: `Bearer ${state === null || state === void 0 ? void 0 : (_state$userData3 = state.userData) === null || _state$userData3 === void 0 ? void 0 : _state$userData3.access_token}`\n        }\n      }).then(response => {\n        console.log(response.data);\n      }).catch(e => console.log(e)); // setState({\n      //     title: \"now submitted\",\n      //     description: \"\"\n      // });\n      // setselectedFiles([])\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"page-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Container, {\n    fluid: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Breadcrumbs, {\n    title: props.t(\"Submit Project\"),\n    breadcrumbItem: props.t(\"Submit Project\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(AvForm, {\n    className: \"form-horizontal\",\n    onValidSubmit: (e, v) => {\n      handleValidSubmit(e, v);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: \"12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(CardBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"basic-pills-wizard\",\n    className: \"twitter-bs-wizard\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"twitter-bs-wizard-nav nav nav-justified nav-pills\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(NavItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 49\n    }\n  }, /*#__PURE__*/React.createElement(NavLink, {\n    className: classnames({\n      active: activeTab === 1\n    }),\n    onClick: () => {\n      setactiveTab(1);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 53\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"step-number mr-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 57\n    }\n  }, \"01\"), \"Submit Project\"))), /*#__PURE__*/React.createElement(TabContent, {\n    activeTab: activeTab,\n    className: \"twitter-bs-wizard-tab-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(TabPane, {\n    tabId: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 49\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 53\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: \"6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 57\n    }\n  }, /*#__PURE__*/React.createElement(FormGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 61\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    for: \"basicpill-address-input2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 65\n    }\n  }, \"ADDITIONAL NOTE\"), /*#__PURE__*/React.createElement(\"textarea\", {\n    value: state.description,\n    onChange: onChange,\n    name: \"description\",\n    id: \"basicpill-address-input2\",\n    className: \"form-control\",\n    rows: \"11\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 65\n    }\n  }))), /*#__PURE__*/React.createElement(Col, {\n    lg: \"6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 57\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    for: \"basicpill-address-input2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 61\n    }\n  }, \"ADDITIONAL MATERIAL\"), /*#__PURE__*/React.createElement(Dropzone, {\n    onDrop: acceptedFiles => {\n      handleAcceptedFiles(acceptedFiles);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 61\n    }\n  }, ({\n    getRootProps,\n    getInputProps\n  }) => /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dropzone\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 69\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", Object.assign({\n    className: \"dz-message needsclick mt-2\"\n  }, getRootProps(), {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 73\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", Object.assign({}, getInputProps(), {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 77\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 77\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"display-4 text-muted bx bxs-cloud-upload\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 81\n    }\n  })), /*#__PURE__*/React.createElement(\"h5\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 77\n    }\n  }, \"Drop files here or click to upload.\")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dropzone-previews mt-3\",\n    id: \"file-previews\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 61\n    }\n  }, state.loading ? /*#__PURE__*/React.createElement(\"div\", {\n    class: \"spinner-border\",\n    role: \"status\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 83\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    class: \"sr-only\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 69\n    }\n  }, \"Loading...\")) : selectedFiles.map((f, i) => {\n    return /*#__PURE__*/React.createElement(Card, {\n      key: i + \"-file\",\n      className: \"mt-1 mb-0 shadow-none border dz-processing dz-image-preview dz-success dz-complete\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 73\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"p-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 77\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      className: \"align-items-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 81\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      className: \"col-auto\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 85\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      \"data-dz-thumbnail\": \"\",\n      height: \"80\",\n      className: \"avatar-sm rounded bg-light\",\n      alt: f.name,\n      src: f.preview,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 89\n      }\n    })), /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 85\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"#\",\n      className: \"text-muted font-weight-bold\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 89\n      }\n    }, f.name), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"mb-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 89\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 93\n      }\n    }, f.formattedSize))))));\n  }))))))), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"btn btn-warning waves-effect waves-light\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 41\n    }\n  }, \"Submit\")))))))));\n};\n\nexport default withNamespaces()(stateWrapper(SubmitProject));","map":{"version":3,"sources":["/Users/mac/writingPlatform/src/pages/Writer/Projects/SubmitProject.js"],"names":["React","useState","useEffect","Container","Row","Col","Button","Card","CardBody","NavItem","NavLink","TabContent","TabPane","FormGroup","Label","Input","classnames","Link","Breadcrumbs","withNamespaces","AvForm","Dropzone","stateWrapper","instance","SubmitProject","props","activeTab","setactiveTab","selectedFiles","setselectedFiles","state","setState","title","description","additionMaterial","loading","userData","onChange","e","userStore","fetchUser","console","log","access_token","formatBytes","bytes","decimals","k","dm","sizes","i","Math","floor","parseFloat","pow","toFixed","handleAcceptedFiles","files","map","file","Object","assign","preview","URL","createObjectURL","formattedSize","size","setTimeout","handleValidSubmit","event","values","id","form","FormData","append","result","post","headers","Authorization","then","response","data","catch","t","v","active","acceptedFiles","getRootProps","getInputProps","f","name"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport {\n    Container,\n    Row,\n    Col,\n    Button,\n    Card,\n    CardBody,\n    NavItem,\n    NavLink,\n    TabContent,\n    TabPane,\n    FormGroup,\n    Label,\n    Input,\n} from \"reactstrap\";\nimport classnames from \"classnames\";\nimport { Link } from \"react-router-dom\";\n//Import Breadcrumb\nimport Breadcrumbs from \"../../../components/Common/Breadcrumb\";\n\n//i18n\nimport { withNamespaces } from \"react-i18next\";\nimport AvForm from \"availity-reactstrap-validation/lib/AvForm\";\nimport Dropzone from \"react-dropzone\";\n\nimport stateWrapper from \"../../../containers/provider\";\n\nimport instance from \"../../../helpers/axiosly\";\n\nconst SubmitProject = (props) => {\n\n    const [activeTab, setactiveTab] = useState(1)\n    const [selectedFiles, setselectedFiles] = useState([]);\n\n    const [state, setState] = useState({\n        title: \"submitted title\",\n        description: \"\",\n        additionMaterial: \"\",\n        loading: false,\n        userData: null\n    });\n\n\n\n    const onChange = (e) => {\n        // let { name, value } = e.target;\n        // setState({\n        //     ...state,\n        //     [name]: value,\n        // });\n    }\n\n\n\n    useEffect(() => {\n\n        let userData;\n        userData = props.userStore.fetchUser(props);;\n        console.log(userData)\n        console.log(userData?.access_token)\n        console.log(state.title)\n\n\n        setState({\n            userData: userData\n        })\n\n        //eslint-disable-line\n    }, [])\n\n    //   \n    function formatBytes(bytes, decimals = 2) {\n        if (bytes === 0) return \"0 Bytes\";\n        const k = 1024;\n        const dm = decimals < 0 ? 0 : decimals;\n        const sizes = [\"Bytes\", \"KB\", \"MB\", \"GB\", \"TB\", \"PB\", \"EB\", \"ZB\", \"YB\"];\n\n        const i = Math.floor(Math.log(bytes) / Math.log(k));\n        return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + \" \" + sizes[i];\n    }\n\n\n\n    function handleAcceptedFiles(files) {\n        setState({\n            loading: true,\n        });\n\n        files.map((file) =>\n            Object.assign(file, {\n                preview: URL.createObjectURL(file),\n                formattedSize: formatBytes(file.size),\n            })\n        );\n        setselectedFiles(files);\n        setTimeout(function () {\n            setState({ loading: false })\n        }, 500)\n\n    }\n\n\n    async function handleValidSubmit(event, values) {\n\n        try {\n\n            userData = await props.userStore.fetchUser(props);;\n            console.log(userData)\n            console.log(userData?.access_token)\n            console.log(state?.userData?.id)\n            console.log(state?.userData)\n            const form = new FormData();\n            console.log();\n            form.append(\"text\", state.title);\n            form.append(\"description\", state.description);\n            form.append(\"file\", selectedFiles[0]);\n\n            // for (var key of form.entries()) {\n            //     console.log(key[1])\n            // }\n\n            const result = await instance\n                .post(`${'https://api.electrikrecharge.com/'}/${state?.userData?.id}/submit`, form, {\n                    headers: {\n                        \"Content-Type\": \"multipart/form-data\",\n                        Authorization: `Bearer ${state?.userData?.access_token}`,\n                    },\n                })\n                .then((response) => {\n                    console.log(response.data);\n\n                })\n                .catch((e) => console.log(e));\n\n            // setState({\n            //     title: \"now submitted\",\n            //     description: \"\"\n            // });\n\n            // setselectedFiles([])\n        }\n        catch (e) {\n            console.log(e)\n        }\n    }\n\n    return (\n        <React.Fragment>\n            <div className=\"page-content\">\n                <Container fluid>\n                    {/* Render Breadcrumb */}\n                    <Breadcrumbs\n                        title={props.t(\"Submit Project\")}\n                        breadcrumbItem={props.t(\"Submit Project\")}\n                    />\n                    <AvForm\n                        className=\"form-horizontal\"\n                        onValidSubmit={(e, v) => {\n                            handleValidSubmit(e, v);\n                        }}\n                    >\n                        <Row>\n                            <Col lg=\"12\">\n                                <Card>\n                                    <CardBody>\n\n\n                                        <div id=\"basic-pills-wizard\" className=\"twitter-bs-wizard\">\n                                            <ul className=\"twitter-bs-wizard-nav nav nav-justified nav-pills\">\n                                                <NavItem>\n                                                    <NavLink\n                                                        className={classnames({ active: activeTab === 1 })}\n                                                        onClick={() => {\n                                                            setactiveTab(1)\n                                                        }}\n                                                    >\n                                                        <span className=\"step-number mr-2\">01</span>\n                        Submit Project\n                      </NavLink>\n                                                </NavItem>\n                                            </ul>\n                                            <TabContent\n                                                activeTab={activeTab}\n                                                className=\"twitter-bs-wizard-tab-content\"\n                                            >\n                                                <TabPane tabId={1}>\n                                                    <Row>\n                                                        <Col lg=\"6\">\n                                                            <FormGroup>\n                                                                <Label for=\"basicpill-address-input2\">\n                                                                    ADDITIONAL NOTE\n                            </Label>\n                                                                <textarea\n                                                                    value={state.description}\n                                                                    onChange={onChange}\n                                                                    name=\"description\"\n                                                                    id=\"basicpill-address-input2\"\n                                                                    className=\"form-control\"\n                                                                    rows=\"11\"\n                                                                ></textarea>\n                                                            </FormGroup>\n                                                        </Col>\n                                                        <Col lg=\"6\">\n                                                            <Label for=\"basicpill-address-input2\">\n                                                                ADDITIONAL MATERIAL\n                            </Label>\n                                                            <Dropzone\n                                                                onDrop={(acceptedFiles) => {\n                                                                    handleAcceptedFiles(acceptedFiles);\n                                                                }}\n\n                                                            >\n                                                                {({ getRootProps, getInputProps }) => (\n                                                                    <div className=\"dropzone\">\n                                                                        <div\n                                                                            className=\"dz-message needsclick mt-2\"\n                                                                            {...getRootProps()}\n                                                                        >\n                                                                            <input {...getInputProps()} />\n                                                                            <div className=\"mb-3\">\n                                                                                <i className=\"display-4 text-muted bx bxs-cloud-upload\"></i>\n                                                                            </div>\n                                                                            <h5>\n                                                                                Drop files here or click to upload.\n                                      </h5>\n                                                                        </div>\n                                                                    </div>\n                                                                )}\n                                                            </Dropzone>\n                                                            <div className=\"dropzone-previews mt-3\" id=\"file-previews\">\n                                                                {state.loading ? (<div class=\"spinner-border\" role=\"status\">\n                                                                    <span class=\"sr-only\">Loading...</span>\n                                                                </div>) : selectedFiles.map((f, i) => {\n                                                                    return (\n                                                                        <Card key={i + \"-file\"} className=\"mt-1 mb-0 shadow-none border dz-processing dz-image-preview dz-success dz-complete\">\n                                                                            <div className=\"p-2\">\n                                                                                <Row className=\"align-items-center\">\n                                                                                    <Col className=\"col-auto\">\n                                                                                        <img\n                                                                                            data-dz-thumbnail=\"\"\n                                                                                            height=\"80\"\n                                                                                            className=\"avatar-sm rounded bg-light\"\n                                                                                            alt={f.name}\n                                                                                            src={f.preview}\n                                                                                        />\n                                                                                    </Col>\n                                                                                    <Col>\n                                                                                        <Link\n                                                                                            to=\"#\"\n                                                                                            className=\"text-muted font-weight-bold\"\n                                                                                        >\n                                                                                            {f.name}\n                                                                                        </Link>\n                                                                                        <p className=\"mb-0\">\n                                                                                            <strong>{f.formattedSize}</strong>\n                                                                                        </p>\n                                                                                    </Col>\n                                                                                </Row>\n                                                                            </div>\n\n                                                                        </Card>\n                                                                    )\n                                                                })}\n                                                            </div>\n                                                        </Col>\n                                                    </Row>\n                                                </TabPane>\n                                            </TabContent>\n                                        </div>\n                                        <button\n                                            type=\"submit\"\n                                            className=\"btn btn-warning waves-effect waves-light\"\n                                        >\n                                            Submit\n                    </button>\n                                    </CardBody>\n                                </Card>\n                            </Col>\n                        </Row>\n                    </AvForm>\n                </Container>\n            </div>\n        </React.Fragment>\n    );\n};\n\nexport default withNamespaces()(stateWrapper(SubmitProject));\n"]},"metadata":{},"sourceType":"module"}