{"ast":null,"code":"var _jsxFileName = \"/Users/mac/writingPlatform/src/pages/SuperAdmin/Annoucement.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { Container, Row, Col, Button, Card, CardBody, CardTitle, Modal, ModalHeader, ModalBody, ModalFooter, Media, Table, NavItem, NavLink, TabContent, TabPane, FormGroup, Label, Input } from \"reactstrap\";\nimport classnames from \"classnames\";\nimport { Link } from \"react-router-dom\"; //Import Breadcrumb\n\nimport Breadcrumbs from \"../../components/Common/Breadcrumb\"; //i18n\n\nimport { withNamespaces } from \"react-i18next\";\nimport AvForm from \"availity-reactstrap-validation/lib/AvForm\";\nimport Dropzone from \"react-dropzone\";\nimport stateWrapper from \"../../containers/provider\";\nimport instance from \"../../helpers/axiosly\";\n\nconst Annoucement = props => {\n  const [activeTab, setactiveTab] = useState(1);\n  const [selectedFiles, setselectedFiles] = useState([]);\n  const [state, setState] = useState({\n    title: \"\",\n    description: \"\",\n    additionMaterial: \"\",\n    loading: false,\n    droploading: false\n  });\n  const [updateAnnoucement, setUpdateAnnoucement] = useState(\"\");\n  useEffect(() => {\n    let AnnoucementData, userData;\n    userData = props.userStore.fetchUser(props);\n    AnnoucementData = props.masterStore.fetchAnnoucement(userData.access_token);\n\n    if (props.match.params.id) {\n      setUpdateAnnoucement(\"update\");\n      setState({ ...state,\n        title: currentAnnoucement.map(e => {\n          return e.title;\n        }),\n        description: currentAnnoucement.map(e => {\n          return e.description;\n        })\n      });\n      setselectedFiles(currentAnnoucement.map(e => {\n        return e.url;\n      }));\n    } else {\n      setState({ ...state,\n        title: '',\n        description: ''\n      });\n      setselectedFiles([]);\n    } //eslint-disable-line\n\n  }, []);\n  let libraries = props.masterStore.state.sessionData.AnnoucementList;\n  let currentAnnoucement = libraries && libraries.filter(e => e.id === Number(props.match.params.id));\n\n  const onChange = e => {\n    let {\n      name,\n      value\n    } = e.target;\n    setState({ ...state,\n      [name]: value\n    });\n  };\n\n  function formatBytes(bytes, decimals = 2) {\n    if (bytes === 0) return \"0 Bytes\";\n    const k = 1024;\n    const dm = decimals < 0 ? 0 : decimals;\n    const sizes = [\"Bytes\", \"KB\", \"MB\", \"GB\", \"TB\", \"PB\", \"EB\", \"ZB\", \"YB\"];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + \" \" + sizes[i];\n  }\n\n  function handleAcceptedFiles(files) {\n    setState({\n      droploading: true\n    });\n    files.map(file => Object.assign(file, {\n      preview: URL.createObjectURL(file),\n      formattedSize: formatBytes(file.size)\n    }));\n    setselectedFiles(files);\n    setTimeout(function () {\n      setState({ ...state,\n        droploading: false\n      });\n    }, 1000);\n  }\n\n  async function handleValidSubmit(e) {\n    setState({ ...state,\n      loading: true\n    });\n    let userData;\n    userData = props.userStore.fetchUser(props);\n    e.preventDefault();\n    props.masterStore.addAnnoucement(state, userData.access_token, selectedFiles[0]);\n    setTimeout(function () {\n      setState({ ...state,\n        title: \"\",\n        description: \"\",\n        loading: false\n      });\n    }, 2000);\n    setselectedFiles([]);\n    setTimeout(function () {\n      props.history.push({\n        pathname: \"/Annoucement\",\n        state: {\n          status: 'created'\n        }\n      });\n    }, 2000);\n  }\n\n  const handleUpdate = e => {\n    setState({ ...state,\n      loading: true\n    });\n    let userData;\n    userData = props.userStore.fetchUser(props);\n    e.preventDefault();\n    let id = Number(props.match.params.id);\n    props.masterStore.updateAnnoucement(state, userData.access_token, selectedFiles[0], id);\n    setTimeout(function () {\n      setState({ ...state,\n        title: \"\",\n        description: \"\",\n        loading: false\n      });\n    }, 2000);\n    setselectedFiles([]);\n    setTimeout(function () {\n      props.history.push({\n        pathname: \"/Annoucement\",\n        state: {\n          status: 'updated'\n        }\n      });\n    }, 2000);\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"page-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Container, {\n    fluid: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Breadcrumbs, {\n    title: props.t(\"Annoucement\"),\n    breadcrumbItem: props.t(\"Annoucement\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(AvForm, {\n    className: \"form-horizontal\",\n    onValidSubmit: (e, v) => {\n      handleValidSubmit(e, v);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 12\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: \"12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(CardBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"basic-pills-wizard\",\n    className: \"twitter-bs-wizard\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"twitter-bs-wizard-nav nav nav-justified nav-pills\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(NavItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(NavLink, {\n    className: classnames({\n      active: activeTab === 1\n    }),\n    onClick: () => {\n      setactiveTab(1);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"step-number mr-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 25\n    }\n  }, \"01\"), \"Annoucement Details\"))), /*#__PURE__*/React.createElement(TabContent, {\n    activeTab: activeTab,\n    className: \"twitter-bs-wizard-tab-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(TabPane, {\n    tabId: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 22\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: \"12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(FormGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    for: \"basicpill-firstname-input14\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 27\n    }\n  }, \"Annoucement Title\"), /*#__PURE__*/React.createElement(Input, {\n    value: state.title,\n    onChange: onChange,\n    name: \"title\",\n    type: \"text\",\n    id: \"basicpill-firstname-input14\",\n    className: \"form-control\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 27\n    }\n  })))), /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: \"12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(FormGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    for: \"basicpill-address-input2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 29\n    }\n  }, \"DESCRIPTION\"), /*#__PURE__*/React.createElement(\"textarea\", {\n    //    value={state.description}\n    onChange: onChange,\n    name: \"description\",\n    id: \"basicpill-address-input2\",\n    className: \"form-control\",\n    rows: \"11\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 29\n    }\n  }))))))), updateAnnoucement === \"\" ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 23\n    }\n  }, state.loading ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"spinner-grow text-primary m-1\",\n    role: \"status\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 28\n    }\n  }) : /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"btn btn-warning waves-effect waves-light\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 27\n    }\n  }, \"Submit\")) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 23\n    }\n  }, state.loading ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"spinner-grow text-primary m-1\",\n    role: \"status\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 28\n    }\n  }) : /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"btn btn-warning waves-effect waves-light\",\n    onClick: handleUpdate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 27\n    }\n  }, \"Update\"))))))))));\n};\n\nexport default withNamespaces()(stateWrapper(Annoucement));","map":{"version":3,"sources":["/Users/mac/writingPlatform/src/pages/SuperAdmin/Annoucement.js"],"names":["React","useState","useEffect","Container","Row","Col","Button","Card","CardBody","CardTitle","Modal","ModalHeader","ModalBody","ModalFooter","Media","Table","NavItem","NavLink","TabContent","TabPane","FormGroup","Label","Input","classnames","Link","Breadcrumbs","withNamespaces","AvForm","Dropzone","stateWrapper","instance","Annoucement","props","activeTab","setactiveTab","selectedFiles","setselectedFiles","state","setState","title","description","additionMaterial","loading","droploading","updateAnnoucement","setUpdateAnnoucement","AnnoucementData","userData","userStore","fetchUser","masterStore","fetchAnnoucement","access_token","match","params","id","currentAnnoucement","map","e","url","libraries","sessionData","AnnoucementList","filter","Number","onChange","name","value","target","formatBytes","bytes","decimals","k","dm","sizes","i","Math","floor","log","parseFloat","pow","toFixed","handleAcceptedFiles","files","file","Object","assign","preview","URL","createObjectURL","formattedSize","size","setTimeout","handleValidSubmit","preventDefault","addAnnoucement","history","push","pathname","status","handleUpdate","t","v","active"],"mappings":"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","sourcesContent":["import React, { useState, useEffect  } from \"react\";\nimport {\n  Container,\n  Row,\n  Col,\n  Button,\n  Card,\n  CardBody,\n  CardTitle,\n  Modal,\n  ModalHeader,\n  ModalBody,\n  ModalFooter,\n  Media,\n  Table,\n  NavItem,\n  NavLink,\n  TabContent,\n  TabPane,\n  FormGroup,\n  Label,\n  Input,\n} from \"reactstrap\";\nimport classnames from \"classnames\";\nimport { Link } from \"react-router-dom\";\n//Import Breadcrumb\nimport Breadcrumbs from \"../../components/Common/Breadcrumb\";\n\n//i18n\nimport { withNamespaces } from \"react-i18next\";\nimport AvForm from \"availity-reactstrap-validation/lib/AvForm\";\nimport Dropzone from \"react-dropzone\";\n\nimport stateWrapper from \"../../containers/provider\";\n\nimport instance from \"../../helpers/axiosly\";\n\nconst Annoucement = (props) => {\n\n  const[activeTab, setactiveTab] = useState(1)\n  const [selectedFiles, setselectedFiles] = useState([]);\n\n  const [state, setState] = useState({\n    title: \"\",\n    description: \"\",\n    additionMaterial: \"\",\n    loading: false,\n    droploading: false\n  })\n\n  const[updateAnnoucement, setUpdateAnnoucement] = useState(\"\");\n\n  useEffect(() => {\n\n    let AnnoucementData, userData;\n    userData = props.userStore.fetchUser(props);\n\n    AnnoucementData = props.masterStore.fetchAnnoucement(\n      userData.access_token\n    );\n\n    if(props.match.params.id){\n      setUpdateAnnoucement(\"update\")\n        setState({\n        ...state,\n        title: currentAnnoucement.map(e => {return (e.title)}),\n        description: currentAnnoucement.map(e => {return (e.description)})\n        })\n        setselectedFiles(currentAnnoucement.map(e => {return (e.url)}))\n    } else {\n        setState({\n        ...state,\n        title: '',\n        description: ''\n      })\n      setselectedFiles([])\n      }\n\n    //eslint-disable-line\n  }, [])\n\n  let libraries = props.masterStore.state.sessionData.AnnoucementList;\n\n  let currentAnnoucement = libraries && libraries.filter((e) => e.id === Number(props.match.params.id))\n\n\n  const onChange = (e) => {\n    let { name, value } = e.target;\n    setState({\n      ...state,\n      [name]: value,\n    });\n  }\n\n  function formatBytes(bytes, decimals = 2) {\n    if (bytes === 0) return \"0 Bytes\";\n    const k = 1024;\n    const dm = decimals < 0 ? 0 : decimals;\n    const sizes = [\"Bytes\", \"KB\", \"MB\", \"GB\", \"TB\", \"PB\", \"EB\", \"ZB\", \"YB\"];\n\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + \" \" + sizes[i];\n  }\n\n  function handleAcceptedFiles(files) {\n    setState({\n      droploading: true,\n    });\n    files.map((file) =>\n      Object.assign(file, {\n        preview: URL.createObjectURL(file),\n        formattedSize: formatBytes(file.size),\n      })\n    );\n    setselectedFiles(files);\n    setTimeout(function(){\n      setState({...state, droploading: false})\n    }, 1000)\n\n  }\n\n  async function handleValidSubmit(e) {\n    setState({...state,\n      loading: true,\n    });\n    let  userData;\n    userData = props.userStore.fetchUser(props);\n    e.preventDefault()\n    props.masterStore.addAnnoucement(state, userData.access_token, selectedFiles[0])\n\n    setTimeout(function(){\n      setState({...state,\n        title: \"\",\n        description: \"\",\n        loading: false\n      })\n    }, 2000)\n\n    setselectedFiles([])\n\n    setTimeout(function(){\n     props.history.push({pathname:\"/Annoucement\", state:{status: 'created'}});\n    }, 2000)\n\n  }\n\n  const handleUpdate = (e) => {\n    setState({...state,\n      loading: true,\n    });\n    let  userData;\n    userData = props.userStore.fetchUser(props);\n\n\n\n    e.preventDefault()\n    let id = Number(props.match.params.id)\n\n    props.masterStore.updateAnnoucement(state, userData.access_token, selectedFiles[0], id)\n\n    setTimeout(function(){\n      setState({...state,\n        title: \"\",\n        description: \"\",\n        loading: false\n      })\n    }, 2000)\n    setselectedFiles([])\n\n    setTimeout(function(){\n     props.history.push({pathname:\"/Annoucement\", state:{status: 'updated'}});\n    }, 2000)\n\n  }\n\n  return (\n    <React.Fragment>\n      <div className=\"page-content\">\n        <Container fluid>\n          {/* Render Breadcrumb */}\n          <Breadcrumbs\n            title={props.t(\"Annoucement\")}\n            breadcrumbItem={props.t(\"Annoucement\")}\n          />\n           <AvForm\n           className=\"form-horizontal\"\n           onValidSubmit={(e, v) => {\n             handleValidSubmit(e, v);\n           }}\n           >\n            <Row>\n              <Col lg=\"12\">\n                <Card>\n                  <CardBody>\n\n\n                  <div id=\"basic-pills-wizard\" className=\"twitter-bs-wizard\">\n                  <ul className=\"twitter-bs-wizard-nav nav nav-justified nav-pills\">\n                    <NavItem>\n                      <NavLink\n                        className={classnames({active: activeTab === 1})}\n                        onClick={() => {\n                          setactiveTab(1)\n                        }}\n                      >\n                        <span className=\"step-number mr-2\">01</span>\n                        Annoucement Details\n                      </NavLink>\n                    </NavItem>\n                  </ul>\n                  <TabContent\n                    activeTab={activeTab}\n                    className=\"twitter-bs-wizard-tab-content\"\n                  >\n                    <TabPane tabId={1}>\n                     <Row>\n                      <Col lg=\"12\">\n                        <FormGroup>\n                          <Label for=\"basicpill-firstname-input14\">\n                            Annoucement Title\n                          </Label>\n                          <Input\n                             value={state.title}\n                             onChange={onChange}\n                             name=\"title\"\n                            type=\"text\"\n                            id=\"basicpill-firstname-input14\"\n                            className=\"form-control\"\n                          />\n                        </FormGroup>\n                      </Col>\n                      </Row>\n                      <Row>\n                        <Col lg=\"12\">\n                        <FormGroup>\n                            <Label for=\"basicpill-address-input2\">\n                              DESCRIPTION\n                            </Label>\n                            <textarea\n                            //    value={state.description}\n                               onChange={onChange}\n                              name=\"description\"\n                              id=\"basicpill-address-input2\"\n                              className=\"form-control\"\n                              rows=\"11\"\n                            ></textarea>\n                          </FormGroup>\n                        </Col>\n                       \n                      </Row>\n                    </TabPane>\n                  </TabContent>\n                  </div>\n                  {updateAnnoucement  === \"\" ?\n                    (\n                      <div>\n                        {state.loading ? (\n                           <div\n                           className=\"spinner-grow text-primary m-1\"\n                           role=\"status\"\n                         >\n                           {/* <span className=\"sr-only\">Loading...</span> */}\n                         </div>\n                         ): (\n                          <button\n                         type=\"submit\"\n                          className=\"btn btn-warning waves-effect waves-light\"\n                        >\n                          Submit\n                        </button>\n                         )}\n\n                      </div>\n\n                    ): (\n                      <div>\n                        {state.loading ? (\n                           <div\n                           className=\"spinner-grow text-primary m-1\"\n                           role=\"status\"\n                         >\n                           {/* <span className=\"sr-only\">Loading...</span> */}\n                         </div>\n                         ): (\n                          <button\n                          type=\"submit\"\n                          className=\"btn btn-warning waves-effect waves-light\"\n                          onClick={handleUpdate}\n                        >\n                          Update\n                        </button>\n                         )}\n\n                    </div>\n                    )\n                  }\n\n                  </CardBody>\n                </Card>\n              </Col>\n            </Row>\n          </AvForm>\n          </Container>\n          </div>\n    </React.Fragment>\n  );\n};\n\nexport default withNamespaces()(stateWrapper(Annoucement));\n"]},"metadata":{},"sourceType":"module"}