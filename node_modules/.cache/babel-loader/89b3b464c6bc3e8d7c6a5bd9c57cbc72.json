{"ast":null,"code":"var _jsxFileName = \"/Users/mac/writingPlatform/src/routes/middleware/Writermiddleware.js\";\nimport React, { useEffect } from \"react\";\nimport { Route, Redirect, withRouter } from \"react-router-dom\";\nimport { LOCAL_STORAGE_SIGNIN_KEY } from '../../App.constants';\nimport { grantPermission } from '../../GrantPermission';\nimport { ROLES } from '../../App.constants';\nimport stateWrapper from '../../containers/provider';\n\nfunction Writermiddleware({\n  component: Component,\n  layout: Layout,\n  roles,\n  ...rest\n}) {\n  useEffect(() => {\n    (async () => {\n      var _rest$userStore, _rest$masterStore;\n\n      const userData = rest === null || rest === void 0 ? void 0 : (_rest$userStore = rest.userStore) === null || _rest$userStore === void 0 ? void 0 : _rest$userStore.fetchUser();\n      const bearertoken = userData === null || userData === void 0 ? void 0 : userData.access_token;\n      const userId = userData === null || userData === void 0 ? void 0 : userData.id;\n      console.log(userData, bearertoken); //   const result = rest?.orderStore?.fetchOrders(userData, bearertoken);\n      //   console.log(result);\n\n      const writerExamStatus = rest === null || rest === void 0 ? void 0 : (_rest$masterStore = rest.masterStore) === null || _rest$masterStore === void 0 ? void 0 : _rest$masterStore.findWriterExam();\n    })();\n  }, []);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, grantPermission([ROLES.WRITER]) && /*#__PURE__*/React.createElement(Route, Object.assign({}, rest, {\n    //   findWriterExam\n    render: props => /*#__PURE__*/React.createElement(Layout, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 30,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(Component, Object.assign({}, props, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 7\n      }\n    }))),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 4\n    }\n  })), !grantPermission([ROLES.WRITER]) && /*#__PURE__*/React.createElement(Route, Object.assign({}, rest, {\n    render: props => /*#__PURE__*/React.createElement(Redirect, {\n      to: {\n        pathname: \"/login\",\n        state: {\n          from: props.location\n        }\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 6\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 5\n    }\n  })));\n}\n\nexport default withRouter(stateWrapper(Writermiddleware));","map":{"version":3,"sources":["/Users/mac/writingPlatform/src/routes/middleware/Writermiddleware.js"],"names":["React","useEffect","Route","Redirect","withRouter","LOCAL_STORAGE_SIGNIN_KEY","grantPermission","ROLES","stateWrapper","Writermiddleware","component","Component","layout","Layout","roles","rest","userData","userStore","fetchUser","bearertoken","access_token","userId","id","console","log","writerExamStatus","masterStore","findWriterExam","WRITER","props","pathname","state","from","location"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,SAASC,KAAT,EAAeC,QAAf,EAAwBC,UAAxB,QAA0C,kBAA1C;AACA,SAAQC,wBAAR,QAAuC,qBAAvC;AACA,SAAQC,eAAR,QAA8B,uBAA9B;AACA,SAAQC,KAAR,QAAoB,qBAApB;AACA,OAAOC,YAAP,MAAyB,2BAAzB;;AAEA,SAASC,gBAAT,CAA0B;AACxBC,EAAAA,SAAS,EAAEC,SADa;AACFC,EAAAA,MAAM,EAAEC,MADN;AACcC,EAAAA,KADd;AACqB,KAAGC;AADxB,CAA1B,EAEM;AACJd,EAAAA,SAAS,CAAC,MAAM;AACf,KAAC,YAAY;AAAA;;AACX,YAAMe,QAAQ,GAAGD,IAAH,aAAGA,IAAH,0CAAGA,IAAI,CAAEE,SAAT,oDAAG,gBAAiBC,SAAjB,EAAjB;AACA,YAAMC,WAAW,GAAGH,QAAH,aAAGA,QAAH,uBAAGA,QAAQ,CAAEI,YAA9B;AACA,YAAMC,MAAM,GAAGL,QAAH,aAAGA,QAAH,uBAAGA,QAAQ,CAAEM,EAAzB;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYR,QAAZ,EAAsBG,WAAtB,EAJW,CAKb;AACA;;AACC,YAAMM,gBAAgB,GAAGV,IAAH,aAAGA,IAAH,4CAAGA,IAAI,CAAEW,WAAT,sDAAG,kBAAmBC,cAAnB,EAAzB;AACA,KARD;AAUA,GAXQ,EAWN,EAXM,CAAT;AAYA,sBACE,0CACCrB,eAAe,CAAC,CAACC,KAAK,CAACqB,MAAP,CAAD,CAAf,iBACF,oBAAC,KAAD,oBACMb,IADN;AAEA;AACE,IAAA,MAAM,EAAGc,KAAD,iBACT,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,SAAD,oBAAeA,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OADF,CAJD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAFC,EAaC,CAACvB,eAAe,CAAC,CAACC,KAAK,CAACqB,MAAP,CAAD,CAAhB,iBACD,oBAAC,KAAD,oBACIb,IADJ;AAEA,IAAA,MAAM,EAAGc,KAAD,iBACP,oBAAC,QAAD;AAAW,MAAA,EAAE,EAAE;AAAEC,QAAAA,QAAQ,EAAE,QAAZ;AAAsBC,QAAAA,KAAK,EAAE;AAAEC,UAAAA,IAAI,EAAEH,KAAK,CAACI;AAAd;AAA7B,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAdA,CADF;AA2BE;;AAEJ,eAAe7B,UAAU,CAACI,YAAY,CAACC,gBAAD,CAAb,CAAzB","sourcesContent":["import React, {useEffect} from \"react\";\nimport { Route,Redirect,withRouter } from \"react-router-dom\";\nimport {LOCAL_STORAGE_SIGNIN_KEY} from '../../App.constants'\nimport {grantPermission} from '../../GrantPermission'\nimport {ROLES} from '../../App.constants';\nimport stateWrapper from '../../containers/provider';\n\nfunction Writermiddleware({\n\t\tcomponent: Component, layout: Layout, roles, ...rest\n\t  }) {\n\t\tuseEffect(() => {\n\t\t\t(async () => {\n\t\t\t  const userData = rest?.userStore?.fetchUser();\n\t\t\t  const bearertoken = userData?.access_token;\n\t\t\t  const userId = userData?.id\n\t\t\t  console.log(userData, bearertoken);\n\t\t\t//   const result = rest?.orderStore?.fetchOrders(userData, bearertoken);\n\t\t\t//   console.log(result);\n\t\t\t const writerExamStatus = rest?.masterStore?.findWriterExam();\n\t\t\t})()\n\n\t\t}, [])\n\t\treturn (\n\t\t  <>\n\t\t\t{ grantPermission([ROLES.WRITER]) && (\n\t\t\t<Route\n\t\t\t  {...rest}\n\t\t\t//   findWriterExam\n\t\t\t  render={(props) => (\n\t\t\t\t<Layout>\n\t\t\t\t  <Component {...props} />\n\t\t\t\t</Layout>\n\t\t\t  )}\n\t\t\t/>\n\t\t\t)}\n\t\t\t{\n\t\t\t  !grantPermission([ROLES.WRITER]) && (\n\t\t\t\t<Route\n\t\t\t\t{...rest}\n\t\t\t\trender={(props) => (\n\t\t\t\t\t<Redirect  to={{ pathname: \"/login\", state: { from: props.location } }} />\n\t\t\t\t)}\n\n\t\t\t\t/>\n\n\t\t\t  )\n\t\t\t}\n\t\t  </>\n\t\t);\n\t  }\n\nexport default withRouter(stateWrapper(Writermiddleware));\n\n"]},"metadata":{},"sourceType":"module"}