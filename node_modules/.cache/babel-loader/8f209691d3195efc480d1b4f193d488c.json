{"ast":null,"code":"import _regeneratorRuntime from\"/Users/mac/writingPlatform/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/mac/writingPlatform/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"/Users/mac/writingPlatform/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/mac/writingPlatform/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{CardBody,Card,Button}from'reactstrap';import stateWrapper from\"../../../containers/provider\";import{withNamespaces}from\"react-i18next\";import instance from\"../../../helpers/axiosly\";var Result=function Result(_ref){var results=_ref.results,data=_ref.data,questionId=_ref.questionId,userId=_ref.userId,score=_ref.score,rediect=_ref.rediect;var _useState=useState({loading:false,alert:''}),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),correctAnswers=_useState4[0],setCorrectAnswers=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),scores=_useState6[0],setScores=_useState6[1];//const [score, setScore] = useState(0)\n//const sco = results.map(result => {return result.s})\n//setScore(sco)\n/* useEffect(() => {\n\n\n        let correct = 0;\n\n        results.forEach((result, index) => {\n\n            if(result.a === data[index].answer){\n                console.log(result.s)\n               // setScores({score: score + result.s})\n            } else if(result.a !== data[index].answer) {\n                setScores(0)\n            }\n        })\n        setCorrectAnswers(correct)\n\n\n\n        //eslint-disable-next-line\n    }, [])*/ //.reduce((prev, next)=> prev + next);\n// const sum = scores.reduce((n, {score}) => n + score, 0)\nconsole.log(score);var submitHandler=function submitHandler(){setState(_objectSpread(_objectSpread({},state),{},{loading:true}));function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var token,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(questionId);console.log(userId);_context.prev=2;token=localStorage.getItem(\"token\");_context.next=6;return instance.post(\"\".concat(process.env.REACT_APP_DATABASEURL,\"/exam/\").concat(questionId,\"/user/\").concat(userId),{score:score},{headers:{Authorization:\"Bearer \".concat(token)}});case 6:res=_context.sent;console.log(res.data);if(res.data.status=='Success'){setState(_objectSpread(_objectSpread({},state),{},{loading:false,alert:true}));}_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](2);console.log(_context.t0);case 14:case\"end\":return _context.stop();}}},_callee,null,[[2,11]]);}));return _fetchData.apply(this,arguments);}fetchData();setTimeout(function(){rediect.push(\"/wexam\");},4000);};return/*#__PURE__*/React.createElement(Card,{body:true,className:\"text-center\"},/*#__PURE__*/React.createElement(\"div\",null,state.alert?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"alert alert-info alert-dismissible fade show\",role:\"alert\"},/*#__PURE__*/React.createElement(\"i\",{className:\"mdi mdi-alert-circle-outline mr-2\"}),\" Results submitted\",/*#__PURE__*/React.createElement(\"button\",{type:\"button\",class:\"close\",\"data-dismiss\":\"alert\",\"aria-label\":\"Close\"},/*#__PURE__*/React.createElement(\"span\",{\"aria-hidden\":\"true\"},\"\\xD7\")))):\"\",/*#__PURE__*/React.createElement(\"h3\",{className:\"card-title mb-4 text-info\"},\"Your Score: \"),/*#__PURE__*/React.createElement(\"h2\",null,score),state.loading?/*#__PURE__*/React.createElement(\"div\",{className:\"spinner-grow text-primary m-1\",role:\"status\"}):/*#__PURE__*/React.createElement(Button,{color:\"primary\",className:\"btn btn-primary waves-effect waves-light mx-4\",onClick:submitHandler},\"Submit Results\")));};export default withNamespaces()(stateWrapper(Result));","map":{"version":3,"sources":["/Users/mac/writingPlatform/src/pages/Writer/Exam/results.js"],"names":["React","useEffect","useState","CardBody","Card","Button","stateWrapper","withNamespaces","instance","Result","results","data","questionId","userId","score","rediect","loading","alert","state","setState","correctAnswers","setCorrectAnswers","scores","setScores","console","log","submitHandler","fetchData","token","localStorage","getItem","post","process","env","REACT_APP_DATABASEURL","headers","Authorization","res","status","setTimeout","push"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react';\nimport { CardBody, Card, Button } from 'reactstrap';\nimport stateWrapper from \"../../../containers/provider\";\nimport { withNamespaces } from \"react-i18next\";\nimport instance from \"../../../helpers/axiosly\";\n\nconst Result = ({results, data, questionId, userId, score, rediect}) => {\n\n    const[state, setState] = useState({\n        loading: false,\n        alert: ''\n      })\n    const[correctAnswers, setCorrectAnswers] = useState(0)\n    const [scores, setScores] = useState([])\n    //const [score, setScore] = useState(0)\n\n    //const sco = results.map(result => {return result.s})\n    //setScore(sco)\n\n\n\n   /* useEffect(() => {\n\n\n        let correct = 0;\n\n        results.forEach((result, index) => {\n\n            if(result.a === data[index].answer){\n                console.log(result.s)\n               // setScores({score: score + result.s})\n            } else if(result.a !== data[index].answer) {\n                setScores(0)\n            }\n        })\n        setCorrectAnswers(correct)\n\n\n\n        //eslint-disable-next-line\n    }, [])*/\n\n     //.reduce((prev, next)=> prev + next);\n\n\n    // const sum = scores.reduce((n, {score}) => n + score, 0)\n     console.log(score)\n\n     const submitHandler = () => {\n        setState({...state, loading: true});\n        async function fetchData(){\n            console.log(questionId)\n            console.log(userId)\n\n            try {\n              const token = localStorage.getItem(\"token\")\n              const res = await instance\n                .post(`${process.env.REACT_APP_DATABASEURL}/exam/${questionId}/user/${userId}`, {\n                    score: score\n                },{\n                  headers: {\n                    Authorization: `Bearer ${token}`,\n                  },\n                })\n                console.log(res.data)\n                if(res.data.status == 'Success') {\n                    setState({...state, loading: false, alert: true})\n                }\n\n            } catch (e) {\n              console.log(e);\n            }\n            }\n            fetchData();\n\n            setTimeout(function(){\n              rediect.push(\"/wexam\");\n              }, 4000)\n     }\n\n    return(\n        <Card body className=\"text-center\">\n          <div>\n          {state.alert ? (\n            <div>\n              <div\n                className=\"alert alert-info alert-dismissible fade show\"\n                role=\"alert\"\n              >\n                <i className=\"mdi mdi-alert-circle-outline mr-2\"></i> Results submitted\n                <button\n                  type=\"button\"\n                  class=\"close\"\n                  data-dismiss=\"alert\"\n                  aria-label=\"Close\"\n                >\n                  <span aria-hidden=\"true\">&times;</span>\n                </button>\n              </div>\n\n            </div>\n                ) : \"\"}\n                <h3 className=\"card-title mb-4 text-info\">Your Score: </h3>\n                <h2>{score}</h2>\n                {state.loading ? (\n                    <div\n                    className=\"spinner-grow text-primary m-1\"\n                    role=\"status\"\n                 >\n                    {/* <span className=\"sr-only\">Loading...</span> */}\n                </div>\n                ):(\n                    <Button color=\"primary\" className=\"btn btn-primary waves-effect waves-light mx-4\" onClick={submitHandler}>\n                    Submit Results\n                </Button>\n                    )}\n          </div>\n\n\n        </Card>\n    )\n}\n\nexport default withNamespaces()(stateWrapper(Result));"]},"metadata":{},"sourceType":"module"}