{"ast":null,"code":"import _regeneratorRuntime from\"/Users/mac/writingPlatform/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";var _marked=/*#__PURE__*/_regeneratorRuntime.mark(loginUser),_marked2=/*#__PURE__*/_regeneratorRuntime.mark(logoutUser),_marked3=/*#__PURE__*/_regeneratorRuntime.mark(watchUserLogin),_marked4=/*#__PURE__*/_regeneratorRuntime.mark(watchUserLogout),_marked5=/*#__PURE__*/_regeneratorRuntime.mark(authSaga);import{takeEvery,fork,put,all,call}from\"redux-saga/effects\";import axios from\"axios\";// Login Redux States\nimport{LOGIN_USER,LOGOUT_USER}from\"./actionTypes\";import{loginSuccess,logoutUserSuccess,apiError}from\"./actions\";//Include Both Helper File with needed methods\nimport{getFirebaseBackend}from\"../../../helpers/firebase_helper\";import{postFakeLogin,postJwtLogin,postUserLogin}from\"../../../helpers/fakebackend_helper\";var fireBaseBackend=getFirebaseBackend();function loginUser(_ref){var _ref$payload,user,history,response,_response,_response2,_response3;return _regeneratorRuntime.wrap(function loginUser$(_context){while(1){switch(_context.prev=_context.next){case 0:_ref$payload=_ref.payload,user=_ref$payload.user,history=_ref$payload.history;_context.prev=1;if(!(process.env.REACT_APP_DEFAULTAUTH===\"firebase\")){_context.next=10;break;}_context.next=5;return call(fireBaseBackend.loginUser,user.email,user.password);case 5:response=_context.sent;_context.next=8;return put(loginSuccess(response));case 8:_context.next=35;break;case 10:if(!(process.env.REACT_APP_DEFAULTAUTH===\"jwt\")){_context.next=19;break;}_context.next=13;return call(postJwtLogin,\"/post-jwt-login\",{email:user.email,password:user.password});case 13:_response=_context.sent;localStorage.setItem(\"authUser\",JSON.stringify(_response));_context.next=17;return put(loginSuccess(_response));case 17:_context.next=35;break;case 19:if(!(process.env.REACT_APP_DEFAULTAUTH===\"fake\")){_context.next=28;break;}_context.next=22;return call(postFakeLogin,\"/post-fake-login\",{email:user.email,password:user.password});case 22:_response2=_context.sent;localStorage.setItem(\"authUser\",JSON.stringify(_response2));_context.next=26;return put(loginSuccess(_response2));case 26:_context.next=35;break;case 28:if(!(process.env.REACT_APP_DEFAULTAUTH===\"test\")){_context.next=35;break;}console.log(\"test\",user.email,user.password);_context.next=32;return call(postUserLogin,\"https://api.electrikrecharge.com/auth/login\",{email:user.email,password:user.password});case 32:_response3=_context.sent;console.log(_response3);// postUserLogin('http://api.electrikrecharge.com/auth/login', {email: user.email, password: user.password}).then((res)=>{\n//     console.log(\"res\", res);\n// })\n// .catch((err)=>{\n//     console.log(\"error\",err);\n// })\nconsole.log(\"check \",_response3);case 35:history.push(\"/dashboard\");_context.next=42;break;case 38:_context.prev=38;_context.t0=_context[\"catch\"](1);_context.next=42;return put(apiError(_context.t0));case 42:case\"end\":return _context.stop();}}},_marked,null,[[1,38]]);}function logoutUser(_ref2){var history;return _regeneratorRuntime.wrap(function logoutUser$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:history=_ref2.payload.history;_context2.prev=1;localStorage.removeItem(\"authUser\");if(process.env.REACT_APP_DEFAULTAUTH===\"test\"){// const response = yield call(fireBaseBackend.logout);\n// yield put(logoutUserSuccess(response));\n}history.push(\"/login\");_context2.next=11;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](1);_context2.next=11;return put(apiError(_context2.t0));case 11:case\"end\":return _context2.stop();}}},_marked2,null,[[1,7]]);}export function watchUserLogin(){return _regeneratorRuntime.wrap(function watchUserLogin$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return takeEvery(LOGIN_USER,loginUser);case 2:case\"end\":return _context3.stop();}}},_marked3);}export function watchUserLogout(){return _regeneratorRuntime.wrap(function watchUserLogout$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return takeEvery(LOGOUT_USER,logoutUser);case 2:case\"end\":return _context4.stop();}}},_marked4);}function authSaga(){return _regeneratorRuntime.wrap(function authSaga$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return all([fork(watchUserLogin),fork(watchUserLogout)]);case 2:case\"end\":return _context5.stop();}}},_marked5);}export default authSaga;","map":{"version":3,"sources":["/Users/mac/writingPlatform/src/store/auth/login/saga.js"],"names":["loginUser","logoutUser","watchUserLogin","watchUserLogout","authSaga","takeEvery","fork","put","all","call","axios","LOGIN_USER","LOGOUT_USER","loginSuccess","logoutUserSuccess","apiError","getFirebaseBackend","postFakeLogin","postJwtLogin","postUserLogin","fireBaseBackend","payload","user","history","process","env","REACT_APP_DEFAULTAUTH","email","password","response","localStorage","setItem","JSON","stringify","console","log","push","removeItem"],"mappings":"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","sourcesContent":["import { takeEvery, fork, put, all, call } from \"redux-saga/effects\";\nimport axios from \"axios\";\n\n// Login Redux States\nimport { LOGIN_USER, LOGOUT_USER } from \"./actionTypes\";\nimport { loginSuccess, logoutUserSuccess, apiError } from \"./actions\";\n\n//Include Both Helper File with needed methods\nimport { getFirebaseBackend } from \"../../../helpers/firebase_helper\";\nimport {\n  postFakeLogin,\n  postJwtLogin,\n  postUserLogin,\n} from \"../../../helpers/fakebackend_helper\";\n\nconst fireBaseBackend = getFirebaseBackend();\n\nfunction* loginUser({ payload: { user, history } }) {\n  try {\n    if (process.env.REACT_APP_DEFAULTAUTH === \"firebase\") {\n      const response = yield call(\n        fireBaseBackend.loginUser,\n        user.email,\n        user.password\n      );\n      yield put(loginSuccess(response));\n    } else if (process.env.REACT_APP_DEFAULTAUTH === \"jwt\") {\n      const response = yield call(postJwtLogin, \"/post-jwt-login\", {\n        email: user.email,\n        password: user.password,\n      });\n      localStorage.setItem(\"authUser\", JSON.stringify(response));\n      yield put(loginSuccess(response));\n    } else if (process.env.REACT_APP_DEFAULTAUTH === \"fake\") {\n      const response = yield call(postFakeLogin, \"/post-fake-login\", {\n        email: user.email,\n        password: user.password,\n      });\n      localStorage.setItem(\"authUser\", JSON.stringify(response));\n      yield put(loginSuccess(response));\n\n    } else if (process.env.REACT_APP_DEFAULTAUTH === \"test\") {\n        console.log(\"test\", user.email, user.password);\n      const response = yield call(\n        postUserLogin,\n        \"https://api.electrikrecharge.com/auth/login\",\n        { email: user.email, password: user.password }\n      );\n      console.log(response);\n      // postUserLogin('http://api.electrikrecharge.com/auth/login', {email: user.email, password: user.password}).then((res)=>{\n      //     console.log(\"res\", res);\n      // })\n      // .catch((err)=>{\n      //     console.log(\"error\",err);\n      // })\n      console.log(\"check \", response);\n    }\n    history.push(\"/dashboard\");\n  } catch (error) {\n    yield put(apiError(error));\n  }\n}\n\nfunction* logoutUser({ payload: { history } }) {\n  try {\n    localStorage.removeItem(\"authUser\");\n\n    if (process.env.REACT_APP_DEFAULTAUTH === \"test\") {\n      // const response = yield call(fireBaseBackend.logout);\n      // yield put(logoutUserSuccess(response));\n    }\n    history.push(\"/login\");\n  } catch (error) {\n    yield put(apiError(error));\n  }\n}\n\nexport function* watchUserLogin() {\n  yield takeEvery(LOGIN_USER, loginUser);\n}\n\nexport function* watchUserLogout() {\n  yield takeEvery(LOGOUT_USER, logoutUser);\n}\n\nfunction* authSaga() {\n  yield all([fork(watchUserLogin), fork(watchUserLogout)]);\n}\n\nexport default authSaga;\n"]},"metadata":{},"sourceType":"module"}