{"ast":null,"code":"import _defineProperty from\"/Users/mac/writingPlatform/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/mac/writingPlatform/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/mac/writingPlatform/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/mac/writingPlatform/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/mac/writingPlatform/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Container,Row,Col,Button,Card,CardBody,CardTitle,Modal,ModalHeader,ModalBody,ModalFooter,Media,Table}from\"reactstrap\";import{Link}from\"react-router-dom\";//Import Breadcrumb\nimport Breadcrumbs from\"../../components/Common/Breadcrumb\";//i18n\nimport{withNamespaces}from\"react-i18next\";import instance from\"../../helpers/axiosly\";import stateWrapper from\"../../containers/provider\";var Payments=function Payments(props){var _projectArr,_projectArr2,_projectArr3;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),projectArray=_useState2[0],setProjecArray=_useState2[1];var _useState3=useState({project:\"\",total_balance:0}),_useState4=_slicedToArray(_useState3,2),state=_useState4[0],setState=_useState4[1];useEffect(function(){function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var token,res,projectTotalBalance;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;token=localStorage.getItem(\"token\");_context.next=4;return instance.get(\"\".concat(process.env.REACT_APP_DATABASEURL,\"/order\"),{headers:{Authorization:\"Bearer \".concat(token)}});case 4:res=_context.sent;setProjecArray(res.data.data.rows);// get the total balance for all projects\nprojectTotalBalance=res.data.data.rows.reduce(function(previousValue,currentValue){return{balance:parseInt(previousValue.balance)+parseInt(currentValue.balance)};});setState({total_balance:projectTotalBalance.balance});console.log(\"projects for this user :\".res.data.data.rows);_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return _fetchData.apply(this,arguments);}fetchData();//eslint-disable-line\n},[]);// const singleProjectPayment = async (id, user_id, amount, balance, redirect_url) => {\n//   const res = await props.masterStore.deleteSpacing(id);\n//   if(res.data.status == 'Success'){\n//    setState({...state, alert: 'deleted'})\n//    setTimeout(function(){\n//     setState({...state, alert: ''})\n//   }, 2000)\n//   }\n//   window.location.reload()\n// }\nvar projectArr=function projectArr(){return projectArray.find(function(i){return i.id==state.project;});};var onChange=function onChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setState(_objectSpread(_objectSpread({},state),{},_defineProperty({},name,value)));};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"page-content\"},/*#__PURE__*/React.createElement(Container,{fluid:true},/*#__PURE__*/React.createElement(Breadcrumbs,{title:props.t(\"Payments\"),breadcrumbItem:props.t(\"Payments\")}),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{lg:\"8\"},/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(\"h5\",null,\"Payments\"),/*#__PURE__*/React.createElement(\"p\",null,\"Separate Existence is a myth\"),/*#__PURE__*/React.createElement(\"div\",{className:\"hr\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"mb-4\"}),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{lg:\"5\"},/*#__PURE__*/React.createElement(\"div\",{class:\"card-radio-custom \"},/*#__PURE__*/React.createElement(\"i\",{class:\"mdi mdi-bitcoin font-size-24 text-warning align-middle mr-2\"}),/*#__PURE__*/React.createElement(\"span\",null,\"Total Balance : \",/*#__PURE__*/React.createElement(\"b\",null,\"$\".concat(state.total_balance),\" \"))),/*#__PURE__*/React.createElement(\"div\",{className:\"mb-4\"}))),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{lg:\"6\"},/*#__PURE__*/React.createElement(\"p\",null,\"Flutterwave is an online payment gateway that allows merchants and banks to accept, manage and process digital payments.\",\" \"))),/*#__PURE__*/React.createElement(\"div\",{className:\"mb-4\"}),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{lg:\"4\"},/*#__PURE__*/React.createElement(\"select\",{className:\"custom-select\",value:state.project,name:\"project\",onChange:onChange},/*#__PURE__*/React.createElement(\"option\",{defaultValue:true},\"Select \"),projectArray.map(function(item,id){return/*#__PURE__*/React.createElement(\"option\",{value:item.id,key:id},item.topic);}))),/*#__PURE__*/React.createElement(Col,{lg:\"4\"},/*#__PURE__*/React.createElement(Button,{color:\"primary\",className:\"btn btn-warning waves-effect waves-light\"},\" \",\"Pay All\")))))),/*#__PURE__*/React.createElement(Col,{lg:\"4\"},state.project===''?'':/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(\"p\",null,\"Project Topic :\"),/*#__PURE__*/React.createElement(\"p\",null,(_projectArr=projectArr())===null||_projectArr===void 0?void 0:_projectArr.topic),/*#__PURE__*/React.createElement(\"p\",null,\"Project Balance :\"),/*#__PURE__*/React.createElement(\"p\",null,\"$\",(_projectArr2=projectArr())===null||_projectArr2===void 0?void 0:_projectArr2.balance),/*#__PURE__*/React.createElement(\"div\",{className:\"mb-4\"}),/*#__PURE__*/React.createElement(Button,{color:\"primary\",className:\"btn btn-warning waves-effect waves-light\"},\" \",\"Pay $\",(_projectArr3=projectArr())===null||_projectArr3===void 0?void 0:_projectArr3.balance))))))));};export default withNamespaces()(stateWrapper(Payments));","map":{"version":3,"sources":["/Users/mac/writingPlatform/src/pages/Payments/Payments.js"],"names":["React","useState","useEffect","Container","Row","Col","Button","Card","CardBody","CardTitle","Modal","ModalHeader","ModalBody","ModalFooter","Media","Table","Link","Breadcrumbs","withNamespaces","instance","stateWrapper","Payments","props","projectArray","setProjecArray","project","total_balance","state","setState","fetchData","token","localStorage","getItem","get","process","env","REACT_APP_DATABASEURL","headers","Authorization","res","data","rows","projectTotalBalance","reduce","previousValue","currentValue","balance","parseInt","console","log","projectArr","find","i","id","onChange","e","target","name","value","t","map","item","topic"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport {\n  Container,\n  Row,\n  Col,\n  Button,\n  Card,\n  CardBody,\n  CardTitle,\n  Modal,\n  ModalHeader,\n  ModalBody,\n  ModalFooter,\n  Media,\n  Table,\n} from \"reactstrap\";\nimport { Link } from \"react-router-dom\";\n\n//Import Breadcrumb\nimport Breadcrumbs from \"../../components/Common/Breadcrumb\";\n\n//i18n\nimport { withNamespaces } from \"react-i18next\";\nimport instance from \"../../helpers/axiosly\";\nimport stateWrapper from \"../../containers/provider\";\n\n\nconst Payments = (props) => {\n\n  const [projectArray, setProjecArray] = useState([]);\n  const [state, setState] = useState({\n    project: \"\",\n    total_balance: 0\n  })\n  useEffect(() => {\n    async function fetchData() {\n      try {\n        const token = localStorage.getItem(\"token\")\n        const res = await instance\n          .get(`${process.env.REACT_APP_DATABASEURL}/order`, {\n            headers: {\n              Authorization: `Bearer ${token}`,\n            },\n          })\n\n        setProjecArray(res.data.data.rows)\n\n        // get the total balance for all projects\n        let projectTotalBalance = res.data.data.rows.reduce(function (previousValue, currentValue) {\n          return {\n            balance: parseInt(previousValue.balance) + parseInt(currentValue.balance)\n          }\n        });\n        setState({ total_balance: projectTotalBalance.balance })\n\n        console.log(\"projects for this user :\".res.data.data.rows)\n\n\n      } catch (e) {\n        console.log(e);\n      }\n    }\n    fetchData();\n\n\n    //eslint-disable-line\n  }, [])\n\n  // const singleProjectPayment = async (id, user_id, amount, balance, redirect_url) => {\n\n  //   const res = await props.masterStore.deleteSpacing(id);\n\n  //   if(res.data.status == 'Success'){\n  //    setState({...state, alert: 'deleted'})\n  //    setTimeout(function(){\n  //     setState({...state, alert: ''})\n  //   }, 2000)\n  //   }\n  //   window.location.reload()\n  // }\n\n  const projectArr = () => {\n    return projectArray.find(i => {\n      return i.id == state.project\n    })\n  }\n\n  const onChange = (e) => {\n    let { name, value } = e.target;\n    setState({\n      ...state,\n      [name]: value,\n    });\n  }\n\n  return (\n    <React.Fragment>\n      <div className=\"page-content\">\n        <Container fluid>\n          {/* Render Breadcrumb */}\n          <Breadcrumbs\n            title={props.t(\"Payments\")}\n            breadcrumbItem={props.t(\"Payments\")}\n          />\n\n          <Row>\n            <Col lg=\"8\">\n              <Card>\n                <CardBody>\n                  <h5>Payments</h5>\n                  <p>Separate Existence is a myth</p>\n                  <div className=\"hr\"></div>\n\n                  <div className=\"mb-4\"></div>\n                  <Row>\n                    <Col lg=\"5\">\n                      <div class=\"card-radio-custom \">\n                        <i class=\"mdi mdi-bitcoin font-size-24 text-warning align-middle mr-2\"></i>\n                        <span>\n                          {/* Total Balance : <b>{`$${props.orderStore.state.sessionData.totalBalance}`} </b> */}\n                          Total Balance : <b>{`$${state.total_balance}`} </b>\n\n                        </span>\n                      </div>\n                      <div className=\"mb-4\"></div>\n                    </Col>\n                  </Row>\n                  <Row>\n                    <Col lg=\"6\">\n                      <p>\n                        Flutterwave is an online payment gateway that allows\n                        merchants and banks to accept, manage and process\n                        digital payments.{\" \"}\n                      </p>\n                    </Col>\n                  </Row>\n\n                  <div className=\"mb-4\"></div>\n                  <Row>\n                    <Col lg=\"4\">\n                      <select\n                        className=\"custom-select\"\n                        value={state.project}\n                        name=\"project\"\n                        onChange={onChange}\n                      >\n                        <option defaultValue>Select </option>\n                        {projectArray.map((item, id) => {\n                          return (\n                            <option value={item.id} key={id}>\n                              {item.topic}\n                            </option>\n                          );\n                        })}\n                      </select>\n                    </Col>\n                    <Col lg=\"4\">\n                      <Button\n                        color=\"primary\"\n                        className=\"btn btn-warning waves-effect waves-light\"\n                      >\n                        {\" \"}\n                    Pay All\n                  </Button>\n                    </Col>\n                  </Row>\n\n                </CardBody>\n              </Card>\n            </Col>\n            <Col lg=\"4\">\n              {state.project === '' ? '' :\n                <Card>\n                  <CardBody>\n                    <p>\n                      Project Topic :</p>\n                    <p>\n                      {projectArr()?.topic}\n                    </p>\n                    <p>\n                      Project Balance :</p>\n                    <p>\n                      ${projectArr()?.balance}\n                    </p>\n\n                    <div className=\"mb-4\"></div>\n\n                    <Button\n                      color=\"primary\"\n                      className=\"btn btn-warning waves-effect waves-light\"\n                    >\n                      {\" \"}\n                    Pay ${projectArr()?.balance}\n                  </Button>\n                  </CardBody>\n                </Card>\n              }\n\n            </Col>\n          </Row>\n        </Container>\n      </div>\n    </React.Fragment>\n  );\n};\n\nexport default withNamespaces()(stateWrapper(Payments));\n"]},"metadata":{},"sourceType":"module"}