{"ast":null,"code":"import _regeneratorRuntime from\"/Users/mac/writingPlatform/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/mac/writingPlatform/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import axios from'axios';import instance from\"../../helpers/axiosly\";import{REQUEST_SERVICE,GET_SERVICE,DELETE_SERVICE,SET_CURRENT,CLEAR_CURRENT,UPDATE_SERVICE}from'./actiontype';export var getService=function getService(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var token,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:token=JSON.parse(localStorage.getItem(\"authUser\"));console.log(token.access_token);_context.prev=2;dispatch({type:REQUEST_SERVICE});_context.next=6;return instance.get(\"\".concat(process.env.REACT_APP_DATABASEURL,\"/services\"),{headers:{Authorization:\"Bearer \".concat(token.access_token)}});case 6:res=_context.sent;dispatch({type:GET_SERVICE,payload:res.data.data.rows});_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](2);console.log(_context.t0);case 13:case\"end\":return _context.stop();}}},_callee,null,[[2,10]]);}));return function(_x){return _ref.apply(this,arguments);};}();};export var deleteService=function deleteService(id){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var token;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:token=JSON.parse(localStorage.getItem(\"authUser\"));_context2.prev=1;_context2.next=4;return instance.delete(\"\".concat(process.env.REACT_APP_DATABASEURL,\"/services/{id}\"),{headers:{Authorization:\"Bearer \".concat(token.access_token)}});case 4:dispatch({type:DELETE_SERVICE,payload:id});_context2.next=9;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](1);case 9:case\"end\":return _context2.stop();}}},_callee2,null,[[1,7]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();};","map":{"version":3,"sources":["/Users/mac/writingPlatform/src/store/Service/action..js"],"names":["axios","instance","REQUEST_SERVICE","GET_SERVICE","DELETE_SERVICE","SET_CURRENT","CLEAR_CURRENT","UPDATE_SERVICE","getService","dispatch","token","JSON","parse","localStorage","getItem","console","log","access_token","type","get","process","env","REACT_APP_DATABASEURL","headers","Authorization","res","payload","data","rows","deleteService","id","delete"],"mappings":"+RAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,QAAP,KAAqB,uBAArB,CACA,OACIC,eADJ,CAEIC,WAFJ,CAGIC,cAHJ,CAIIC,WAJJ,CAKIC,aALJ,CAMIC,cANJ,KAOO,cAPP,CAUA,MAAO,IAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,kGAAO,iBAAOC,QAAP,gIAC3BC,KAD2B,CACnBC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAX,CADmB,CAE/BC,OAAO,CAACC,GAAR,CAAYN,KAAK,CAACO,YAAlB,EAF+B,gBAI7BR,QAAQ,CAAC,CAACS,IAAI,CAAEhB,eAAP,CAAD,CAAR,CAJ6B,sBAKXD,CAAAA,QAAQ,CACvBkB,GADe,WACRC,OAAO,CAACC,GAAR,CAAYC,qBADJ,cACsC,CACpDC,OAAO,CAAE,CACPC,aAAa,kBAAYd,KAAK,CAACO,YAAlB,CADN,CAD2C,CADtC,CALW,QAKvBQ,GALuB,eAa3BhB,QAAQ,CAAC,CACPS,IAAI,CAAEf,WADC,CACYuB,OAAO,CAAED,GAAG,CAACE,IAAJ,CAASA,IAAT,CAAcC,IADnC,CAAD,CAAR,CAb2B,iFAiB7Bb,OAAO,CAACC,GAAR,cAjB6B,qEAAP,gEAAnB,CAsBP,MAAO,IAAMa,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,EAAD,kGAAS,kBAAOrB,QAAP,gIAC/BC,KAD+B,CACvBC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAX,CADuB,yCAKxBb,CAAAA,QAAQ,CACb8B,MADK,WACKX,OAAO,CAACC,GAAR,CAAYC,qBADjB,mBACwD,CAC5DC,OAAO,CAAE,CACPC,aAAa,kBAAYd,KAAK,CAACO,YAAlB,CADN,CADmD,CADxD,CALwB,QAW9BR,QAAQ,CAAC,CACLS,IAAI,CAAEd,cADD,CACiBsB,OAAO,CAAEI,EAD1B,CAAD,CAAR,CAX8B,uJAAT,kEAAtB","sourcesContent":["import axios from 'axios'\nimport instance from \"../../helpers/axiosly\";\nimport {\n    REQUEST_SERVICE,\n    GET_SERVICE,\n    DELETE_SERVICE,\n    SET_CURRENT,\n    CLEAR_CURRENT,\n    UPDATE_SERVICE\n} from './actiontype';\n\n\nexport const getService = ()  => async (dispatch) => {\n  let token = JSON.parse(localStorage.getItem(\"authUser\"))\n  console.log(token.access_token)\n  try {\n    dispatch({type: REQUEST_SERVICE});\n    const res = await instance\n      .get(`${process.env.REACT_APP_DATABASEURL}/services`, {\n        headers: {\n          Authorization: `Bearer ${token.access_token}`,\n        },\n      })\n      \n    \n      dispatch({\n        type: GET_SERVICE, payload: res.data.data.rows\n    });\n  } catch (e) {\n    console.log(e);\n  }\n  \n}\n\nexport const deleteService = (id)  => async (dispatch) => {\n   let token = JSON.parse(localStorage.getItem(\"authUser\"))\n  \n    try {\n\n        await instance\n        .delete(`${process.env.REACT_APP_DATABASEURL}/services/{id}`, {\n          headers: {\n            Authorization: `Bearer ${token.access_token}`,\n          },\n        })\n        dispatch({\n            type: DELETE_SERVICE, payload: id\n        });\n    } catch (err) {\n       \n    }\n\n   \n}"]},"metadata":{},"sourceType":"module"}