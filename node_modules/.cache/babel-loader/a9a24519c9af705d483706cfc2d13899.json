{"ast":null,"code":"var _jsxFileName = \"/Users/mac/writingPlatform/src/helpers/Flutterwave.js\";\nimport React, { useEffect } from 'react';\nimport { useFlutterwave, closePaymentModal } from 'flutterwave-react-v3';\nimport * as _ from 'lodash';\nimport { v4 as uuidv4 } from 'uuid';\nimport { paymentTitle, flutterwaveSecret, fluterwavePublicKey } from '../App.constants';\nimport stateWrapper from \"../containers/provider\";\nimport { config } from '../appConfig';\n\nconst Flutterwave = props => {\n  var _props$data2;\n\n  // const logo = config?.agnesLogo;\n  const title = paymentTitle; // const description = paymentDescription;\n  // const value = props?.data;\n  // const isRecurring = (_.isUndefined(value?.paymentPlanFlutterwave) || _.isNull(value?.paymentPlanFlutterwave)) ? false : true\n\n  console.log(config);\n  const configx = {\n    public_key: flutterwaveP,\n    tx_ref: `${uuidv4()}`,\n    amount: '50',\n    currency: 'USD',\n    payment_options: 'card,mobilemoney,ussd,banktransfer,paga,credit,mpesa,barter',\n    customer: {\n      email: 'test@gmail.com',\n      phone_number: '0708543214',\n      name: 'test name'\n    },\n    customizations: {\n      title\n    }\n  };\n  const handleFlutterPayment = useFlutterwave(configx);\n  useEffect(() => {\n    var _props$data;\n\n    if ((_props$data = props.data) === null || _props$data === void 0 ? void 0 : _props$data.setToPayWithFlutterwave) {\n      handleFlutterPayment({\n        callback: response => {\n          console.log(response);\n          const xy = props.handleSubmit();\n          closePaymentModal(); // this will close the modal programmatically\n\n          const xx = props === null || props === void 0 ? void 0 : props.setPayToFalse();\n        },\n        onClose: () => {\n          const sy = props === null || props === void 0 ? void 0 : props.setPayToFalse();\n        }\n      });\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [props === null || props === void 0 ? void 0 : (_props$data2 = props.data) === null || _props$data2 === void 0 ? void 0 : _props$data2.setToPayWithFlutterwave]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 12\n    }\n  });\n};\n\nexport default stateWrapper(Flutterwave); // <Flutterwave handleSubmit={handleSubmit} data={state} setPayToFalse={setPayToFalse}/>\n//","map":{"version":3,"sources":["/Users/mac/writingPlatform/src/helpers/Flutterwave.js"],"names":["React","useEffect","useFlutterwave","closePaymentModal","_","v4","uuidv4","paymentTitle","flutterwaveSecret","fluterwavePublicKey","stateWrapper","config","Flutterwave","props","title","console","log","configx","public_key","flutterwaveP","tx_ref","amount","currency","payment_options","customer","email","phone_number","name","customizations","handleFlutterPayment","data","setToPayWithFlutterwave","callback","response","xy","handleSubmit","xx","setPayToFalse","onClose","sy"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,SAASC,cAAT,EAAyBC,iBAAzB,QAAkD,sBAAlD;AACA,OAAO,KAAKC,CAAZ,MAAmB,QAAnB;AACA,SAASC,EAAE,IAAIC,MAAf,QAA6B,MAA7B;AACA,SAASC,YAAT,EAAuBC,iBAAvB,EAA0CC,mBAA1C,QAAqE,kBAArE;AACA,OAAOC,YAAP,MAAyB,wBAAzB;AACA,SAASC,MAAT,QAAuB,cAAvB;;AAEA,MAAMC,WAAW,GAAGC,KAAK,IAAI;AAAA;;AACzB;AACA,QAAMC,KAAK,GAAGP,YAAd,CAFyB,CAGzB;AACA;AACA;;AACAQ,EAAAA,OAAO,CAACC,GAAR,CAAYL,MAAZ;AACA,QAAMM,OAAO,GAAG;AACZC,IAAAA,UAAU,EAAEC,YADA;AAEZC,IAAAA,MAAM,EAAG,GAAEd,MAAM,EAAG,EAFR;AAGZe,IAAAA,MAAM,EAAE,IAHI;AAIZC,IAAAA,QAAQ,EAAE,KAJE;AAKZC,IAAAA,eAAe,EAAE,6DALL;AAMZC,IAAAA,QAAQ,EAAE;AACRC,MAAAA,KAAK,EAAE,gBADC;AAERC,MAAAA,YAAY,EAAE,YAFN;AAGRC,MAAAA,IAAI,EAAC;AAHG,KANE;AAWZC,IAAAA,cAAc,EAAE;AACdd,MAAAA;AADc;AAXJ,GAAhB;AAgBA,QAAMe,oBAAoB,GAAG3B,cAAc,CAACe,OAAD,CAA3C;AAEAhB,EAAAA,SAAS,CAAC,MAAM;AAAA;;AACZ,uBAAGY,KAAK,CAACiB,IAAT,gDAAG,YAAYC,uBAAf,EAAwC;AACpCF,MAAAA,oBAAoB,CAAC;AACjBG,QAAAA,QAAQ,EAAGC,QAAD,IAAc;AACrBlB,UAAAA,OAAO,CAACC,GAAR,CAAYiB,QAAZ;AACA,gBAAMC,EAAE,GAAGrB,KAAK,CAACsB,YAAN,EAAX;AACChC,UAAAA,iBAAiB,GAHG,CAGA;;AACpB,gBAAMiC,EAAE,GAAGvB,KAAH,aAAGA,KAAH,uBAAGA,KAAK,CAAEwB,aAAP,EAAX;AACH,SANgB;AAOjBC,QAAAA,OAAO,EAAE,MAAM;AACZ,gBAAMC,EAAE,GAAI1B,KAAJ,aAAIA,KAAJ,uBAAIA,KAAK,CAAEwB,aAAP,EAAZ;AACF;AATgB,OAAD,CAApB;AAWH,KAbW,CAchB;;AACC,GAfQ,EAeP,CAACxB,KAAD,aAACA,KAAD,uCAACA,KAAK,CAAEiB,IAAR,iDAAC,aAAaC,uBAAd,CAfO,CAAT;AAiBA,sBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAP;AACH,CA3CD;;AA6CA,eAAerB,YAAY,CAACE,WAAD,CAA3B,C,CAGA;AACA","sourcesContent":["import React, {useEffect} from 'react';\nimport { useFlutterwave, closePaymentModal } from 'flutterwave-react-v3';\nimport * as _ from 'lodash';\nimport { v4 as uuidv4 } from 'uuid';\nimport { paymentTitle, flutterwaveSecret, fluterwavePublicKey } from '../App.constants';\nimport stateWrapper from \"../containers/provider\";\nimport { config } from '../appConfig';\n\nconst Flutterwave = props => {\n    // const logo = config?.agnesLogo;\n    const title = paymentTitle;\n    // const description = paymentDescription;\n    // const value = props?.data;\n    // const isRecurring = (_.isUndefined(value?.paymentPlanFlutterwave) || _.isNull(value?.paymentPlanFlutterwave)) ? false : true\n    console.log(config)\n    const configx = {\n        public_key: flutterwaveP,\n        tx_ref: `${uuidv4()}`,\n        amount: '50',\n        currency: 'USD',\n        payment_options: 'card,mobilemoney,ussd,banktransfer,paga,credit,mpesa,barter',\n        customer: {\n          email: 'test@gmail.com',\n          phone_number: '0708543214',\n          name:'test name'\n        },\n        customizations: {\n          title,\n        }\n    };\n    \n    const handleFlutterPayment = useFlutterwave(configx);\n    \n    useEffect(() => {\n        if(props.data?.setToPayWithFlutterwave) {\n            handleFlutterPayment({\n                callback: (response) => {\n                   console.log(response);\n                   const xy = props.handleSubmit()\n                    closePaymentModal() // this will close the modal programmatically\n                    const xx = props?.setPayToFalse();\n                },\n                onClose: () => {\n                   const sy =  props?.setPayToFalse();\n                },\n            });\n        }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    },[props?.data?.setToPayWithFlutterwave])\n\n    return <div/>\n}\n\nexport default stateWrapper(Flutterwave);\n\n\n// <Flutterwave handleSubmit={handleSubmit} data={state} setPayToFalse={setPayToFalse}/>\n// "]},"metadata":{},"sourceType":"module"}