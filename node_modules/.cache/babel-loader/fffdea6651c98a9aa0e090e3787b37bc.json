{"ast":null,"code":"import _regeneratorRuntime from\"/Users/mac/writingPlatform/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/mac/writingPlatform/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"/Users/mac/writingPlatform/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/mac/writingPlatform/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{Card,CardBody,CardTitle,Badge,Button,Modal,ModalHeader,ModalBody,ModalFooter}from\"reactstrap\";import{Link,useLocation,useHistory}from\"react-router-dom\";import instance from\"../../../helpers/axiosly\";import stateWrapper from\"../../../containers/provider\";import{withNamespaces}from\"react-i18next\";var LibraryList=function LibraryList(props){//const[librarys, setLibrary] = useState([]);\nvar _useState=useState([]),_useState2=_slicedToArray(_useState,2),users=_useState2[0],setUsers=_useState2[1];var _useState3=useState({loading:false,alert:''}),_useState4=_slicedToArray(_useState3,2),state=_useState4[0],setState=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),modal=_useState6[0],setmodal=_useState6[1];var location=useLocation();var history=useHistory();useEffect(function(){setState(_objectSpread(_objectSpread({},state),{},{loading:true}));var userData;userData=props.userStore.fetchUser(props);function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return props.masterStore.fetchLibrary(userData.access_token);case 2:res=_context.sent;if(res.data.status=='Success'){setTimeout(function(){setState(_objectSpread(_objectSpread({},state),{},{loading:false}));},2000);}case 4:case\"end\":return _context.stop();}}},_callee);}));return _fetchData.apply(this,arguments);}fetchData();if(location.state&&location.state.status){setState(_objectSpread(_objectSpread({},state),{},{alert:location.state}));//delete location state\nhistory.replace({pathname:location.pathname,state:{}});}//eslint-disable-line\n},[]);var handleDelete=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return props.masterStore.deleteLibrary(id);case 2:res=_context2.sent;if(res.data.status=='Success'){setState(_objectSpread(_objectSpread({},state),{},{alert:'deleted'}));setTimeout(function(){setState(_objectSpread(_objectSpread({},state),{},{alert:''}));},2000);}window.location.reload();case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function handleDelete(_x){return _ref.apply(this,arguments);};}();var librarys=props.masterStore.state.sessionData.libraryList;var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),openModalLiblists=_useState8[0],setopenModalLiblist=_useState8[1];var openModal=function openModal(id){setmodal(!modal);var openModalLib=librarys.filter(function(e){return e.id===id;});setopenModalLiblist(openModalLib);};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(CardTitle,{className:\"mb-4\"},\"ALL LIBRARY CONTENT\"),state.alert.status==\"created\"?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"alert alert-info alert-dismissible fade show\",role:\"alert\"},/*#__PURE__*/React.createElement(\"i\",{className:\"mdi mdi-alert-circle-outline mr-2\"}),\" New Library Content created\",/*#__PURE__*/React.createElement(\"button\",{type:\"button\",class:\"close\",\"data-dismiss\":\"alert\",\"aria-label\":\"Close\"},/*#__PURE__*/React.createElement(\"span\",{\"aria-hidden\":\"true\"},\"\\xD7\")))):\"\",state.alert.status==\"updated\"?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"alert alert-info alert-dismissible fade show\",role:\"alert\"},/*#__PURE__*/React.createElement(\"i\",{className:\"mdi mdi-alert-circle-outline mr-2\"}),\" Library Content updated\",/*#__PURE__*/React.createElement(\"button\",{type:\"button\",class:\"close\",\"data-dismiss\":\"alert\",\"aria-label\":\"Close\"},/*#__PURE__*/React.createElement(\"span\",{\"aria-hidden\":\"true\"},\"\\xD7\")))):\"\",state.alert==\"deleted\"?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"alert alert-info alert-dismissible fade show\",role:\"alert\"},/*#__PURE__*/React.createElement(\"i\",{className:\"mdi mdi-alert-circle-outline mr-2\"}),\" Library Content deleted\",/*#__PURE__*/React.createElement(\"button\",{type:\"button\",class:\"close\",\"data-dismiss\":\"alert\",\"aria-label\":\"Close\"},/*#__PURE__*/React.createElement(\"span\",{\"aria-hidden\":\"true\"},\"\\xD7\")))):\"\",state.loading?/*#__PURE__*/React.createElement(\"div\",{class:\"spinner-border\",role:\"status\"},/*#__PURE__*/React.createElement(\"span\",{class:\"sr-only\"},\"Loading...\")):/*#__PURE__*/React.createElement(\"div\",{className:\"table-responsive\"},/*#__PURE__*/React.createElement(\"table\",{className:\"table table-centered table-nowrap mb-0\"},/*#__PURE__*/React.createElement(\"thead\",{className:\"thead-light\"},/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",{style:{width:\"20px\"}},/*#__PURE__*/React.createElement(\"div\",{className:\"custom-control custom-checkbox\"},/*#__PURE__*/React.createElement(\"input\",{type:\"checkbox\",className:\"custom-control-input\",id:\"customCheck1\"}),/*#__PURE__*/React.createElement(\"label\",{className:\"custom-control-label\",htmlFor:\"customCheck1\"},\"\\xA0\"))),/*#__PURE__*/React.createElement(\"th\",null,\"Library Topic\"),/*#__PURE__*/React.createElement(\"th\",null,\"Description\"),/*#__PURE__*/React.createElement(\"th\",null,\"File\"),/*#__PURE__*/React.createElement(\"th\",null,\" \"))),/*#__PURE__*/React.createElement(\"tbody\",null,librarys&&librarys.map(function(library,key){return/*#__PURE__*/React.createElement(\"tr\",{key:\"_tr_\"+key},/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"custom-control custom-checkbox\"},/*#__PURE__*/React.createElement(\"input\",{type:\"checkbox\",className:\"custom-control-input\",id:library.id}),/*#__PURE__*/React.createElement(\"label\",{className:\"custom-control-label\",htmlFor:library.id},\"\\xA0\"))),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(Link,{to:\"#\",className:\"text-body font-weight-bold\"},\" \",library.title,\" \"),\" \"),/*#__PURE__*/React.createElement(\"td\",null,library.description),/*#__PURE__*/React.createElement(\"td\",null,library.url),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(Link,{to:\"/createlibrary/\"+library.id},/*#__PURE__*/React.createElement(Button,{size:\"sm\",color:\"primary\",className:\"btn btn-primary waves-effect waves-light mx-2\"},\" \",/*#__PURE__*/React.createElement(\"i\",{className:\"bx bx-edit\"}))),/*#__PURE__*/React.createElement(Button,{color:\"primary\",size:\"sm\",className:\"btn btn-primary waves-effect waves-light mx-2\",onClick:function onClick(){return handleDelete(library.id);}},\" \",/*#__PURE__*/React.createElement(\"i\",{className:\"bx bx-trash\"})),/*#__PURE__*/React.createElement(Button,{type:\"button\",color:\"primary\",size:\"sm\",className:\"btn-rounded waves-effect waves-light\",onClick:function onClick(){return openModal(library.id);}},\" \",\"view library\")));}))),/*#__PURE__*/React.createElement(Modal,{isOpen:modal,role:\"dialog\",autoFocus:true,centered:true,className:\"exampleModal\",tabindex:\"-1\",toggle:function toggle(){setmodal(!modal);}},/*#__PURE__*/React.createElement(\"div\",{className:\"modal-content\"},/*#__PURE__*/React.createElement(ModalHeader,{toggle:function toggle(){setmodal(!modal);}},\"Library Details\"),/*#__PURE__*/React.createElement(ModalBody,null,/*#__PURE__*/React.createElement(\"div\",{className:\"table-responsive\"},openModalLiblists.map(function(openModalLiblist,key){return/*#__PURE__*/React.createElement(\"table\",{className:\"table table-centered table-nowrap mb-0\"},/*#__PURE__*/React.createElement(\"thead\",{className:\"thead-light\"},/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Library Topic\"),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(Link,{to:\"#\",className:\"text-body font-weight-bold\"},\" \",openModalLiblist.title,\" \"),\" \")),/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Description\"),/*#__PURE__*/React.createElement(\"td\",null,openModalLiblist.description)),/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"File\"),/*#__PURE__*/React.createElement(\"td\",null,openModalLiblist.url))),/*#__PURE__*/React.createElement(\"tbody\",null));}))),/*#__PURE__*/React.createElement(ModalFooter,null,/*#__PURE__*/React.createElement(Button,{type:\"button\",color:\"secondary\",onClick:function onClick(){setmodal(!modal);}},\"Close\"))))))));};export default withNamespaces()(stateWrapper(LibraryList));","map":{"version":3,"sources":["/Users/mac/writingPlatform/src/pages/SuperAdmin/library/LibraryList.js"],"names":["React","useEffect","useState","Card","CardBody","CardTitle","Badge","Button","Modal","ModalHeader","ModalBody","ModalFooter","Link","useLocation","useHistory","instance","stateWrapper","withNamespaces","LibraryList","props","users","setUsers","loading","alert","state","setState","modal","setmodal","location","history","userData","userStore","fetchUser","fetchData","masterStore","fetchLibrary","access_token","res","data","status","setTimeout","replace","pathname","handleDelete","id","deleteLibrary","window","reload","librarys","sessionData","libraryList","openModalLiblists","setopenModalLiblist","openModal","openModalLib","filter","e","width","map","library","key","title","description","url","openModalLiblist"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Card, CardBody, CardTitle, Badge, Button, Modal, ModalHeader, ModalBody, ModalFooter } from \"reactstrap\";\nimport { Link,  useLocation, useHistory } from \"react-router-dom\";\nimport instance from \"../../../helpers/axiosly\";\nimport stateWrapper from \"../../../containers/provider\";\nimport { withNamespaces } from \"react-i18next\";\n\n\nconst LibraryList = (props) => {\n\n  //const[librarys, setLibrary] = useState([]);\n  const[users, setUsers] = useState([])\n  const[state, setState] = useState({\n    loading: false,\n    alert: ''\n  })\n  const [modal, setmodal] = useState(false);\n\n  const location = useLocation();\n  const history = useHistory();\n\n  useEffect(() => {\n    setState({...state, loading: true})\n\n    let userData;\n    userData = props.userStore.fetchUser(props);\n\n    async function fetchData(){\n\n        const res = await props.masterStore.fetchLibrary(\n            userData.access_token\n          );\n          if(res.data.status == 'Success'){\n            setTimeout(function(){\n              setState({...state, loading: false})\n            }, 2000)\n          }\n    }\n    fetchData();\n\n    if(location.state && location.state.status) {\n        setState({...state, alert: location.state})\n\n        //delete location state\n         history.replace({\n           pathname: location.pathname, state: {}\n         })\n       }\n    //eslint-disable-line\n  }, [])\n\n  const handleDelete = async (id) =>{\n\n    const res = await props.masterStore.deleteLibrary(id);\n\n    if(res.data.status == 'Success'){\n        setState({...state, alert: 'deleted'})\n        setTimeout(function(){\n         setState({...state, alert: ''})\n       }, 2000)\n       }\n       window.location.reload()\n }\n\n let librarys = props.masterStore.state.sessionData.libraryList;\n\n\n const[openModalLiblists , setopenModalLiblist] = useState([])\n const openModal = (id) => {\n    setmodal(!modal);\n\n    const openModalLib = librarys.filter((e) => e.id === id)\n    setopenModalLiblist(openModalLib)\n }\n\n  return (\n    <React.Fragment>\n\n      <Card>\n        <CardBody>\n          <CardTitle className=\"mb-4\">ALL LIBRARY CONTENT</CardTitle>\n          {state.alert.status == \"created\" ? (\n            <div>\n              <div\n                className=\"alert alert-info alert-dismissible fade show\"\n                role=\"alert\"\n              >\n                <i className=\"mdi mdi-alert-circle-outline mr-2\"></i> New Library Content created\n                <button\n                  type=\"button\"\n                  class=\"close\"\n                  data-dismiss=\"alert\"\n                  aria-label=\"Close\"\n                >\n                  <span aria-hidden=\"true\">&times;</span>\n                </button>\n              </div>\n\n            </div>\n          ) : (\n            \"\"\n          )}\n           {state.alert.status == \"updated\" ? (\n            <div>\n              <div\n                className=\"alert alert-info alert-dismissible fade show\"\n                role=\"alert\"\n              >\n                <i className=\"mdi mdi-alert-circle-outline mr-2\"></i> Library Content updated\n                <button\n                  type=\"button\"\n                  class=\"close\"\n                  data-dismiss=\"alert\"\n                  aria-label=\"Close\"\n                >\n                  <span aria-hidden=\"true\">&times;</span>\n                </button>\n              </div>\n\n            </div>\n          ) : (\n            \"\"\n          )}\n          {state.alert == \"deleted\" ? (\n            <div>\n              <div\n                className=\"alert alert-info alert-dismissible fade show\"\n                role=\"alert\"\n              >\n                <i className=\"mdi mdi-alert-circle-outline mr-2\"></i> Library Content deleted\n                <button\n                  type=\"button\"\n                  class=\"close\"\n                  data-dismiss=\"alert\"\n                  aria-label=\"Close\"\n                >\n                  <span aria-hidden=\"true\">&times;</span>\n                </button>\n              </div>\n\n            </div>\n          ) : (\n            \"\"\n          )}\n         {state.loading ? (<div class=\"spinner-border\" role=\"status\">\n                  <span class=\"sr-only\">Loading...</span>\n                  </div>):(\n                    <div className=\"table-responsive\">\n                    <table className=\"table table-centered table-nowrap mb-0\">\n                      <thead className=\"thead-light\">\n                        <tr>\n                          <th style={{ width: \"20px\" }}>\n                            <div className=\"custom-control custom-checkbox\">\n                              <input\n                                type=\"checkbox\"\n                                className=\"custom-control-input\"\n                                id=\"customCheck1\"\n                              />\n                              <label\n                                className=\"custom-control-label\"\n                                htmlFor=\"customCheck1\"\n                              >\n                                &nbsp;\n                              </label>\n                            </div>\n                          </th>\n                          <th>Library Topic</th>\n                          <th>Description</th>\n                          <th>File</th>\n                          <th>{\" \"}</th>\n                        </tr>\n                      </thead>\n                      <tbody>\n                        {librarys && librarys.map((library, key) => (\n                          <tr key={\"_tr_\" + key}>\n                            <td>\n                              <div className=\"custom-control custom-checkbox\">\n                                <input\n                                  type=\"checkbox\"\n                                  className=\"custom-control-input\"\n                                  id={library.id}\n                                />\n                                <label\n                                  className=\"custom-control-label\"\n                                  htmlFor={library.id}\n                                >\n                                  &nbsp;\n                                </label>\n                              </div>\n                            </td>\n                            <td>\n                              <Link to=\"#\" className=\"text-body font-weight-bold\">\n                                {\" \"}\n                                {library.title}{\" \"}\n                              </Link>{\" \"}\n                            </td>\n                            <td>{library.description}</td>\n                            <td>{library.url}</td>\n                            <td>\n\n\n\n                              <Link to={\"/createlibrary/\" + library.id}>\n                                <Button size=\"sm\"\n                                color=\"primary\"\n                                className=\"btn btn-primary waves-effect waves-light mx-2\"\n                                    >\n                                {\" \"}\n                                <i className=\"bx bx-edit\"></i>\n                                </Button>\n                              </Link>\n\n                              <Button\n                                color=\"primary\" size=\"sm\"\n                                className=\"btn btn-primary waves-effect waves-light mx-2\"\n                                onClick={() => handleDelete(library.id)}\n                                    >\n                                {\" \"}\n                                <i className=\"bx bx-trash\"></i>\n                                </Button>\n                                <Button type=\"button\" color=\"primary\" size=\"sm\" className=\"btn-rounded waves-effect waves-light\"\n                                onClick={() => openModal(library.id) }\n                                    >\n                                {\" \"}\n                                view library\n                                </Button>\n                            </td>\n\n                          </tr>\n\n                        ))}\n                      </tbody>\n                    </table>\n                    <Modal isOpen={modal} role=\"dialog\" autoFocus={true} centered={true} className=\"exampleModal\" tabindex=\"-1\" toggle={() => { setmodal(!modal); }}>\n                           <div className=\"modal-content\">\n                           <ModalHeader toggle={() => { setmodal(!modal); }}>\n                            Library Details\n                            </ModalHeader >\n                            <ModalBody>\n                            <div className=\"table-responsive\">\n                            {openModalLiblists.map((openModalLiblist, key) => (\n                                 <table className=\"table table-centered table-nowrap mb-0\">\n                                 <thead className=\"thead-light\">\n                                    <tr>\n                                     <th>Library Topic</th>\n                                    <td>\n                                    <Link to=\"#\" className=\"text-body font-weight-bold\">\n                                    {\" \"}\n                                        {openModalLiblist.title}{\" \"}\n                                </Link>{\" \"}\n                                    </td>\n\n                                    </tr>\n                                    <tr>\n                                    <th>Description</th>\n                                <td>{openModalLiblist.description}</td>\n                                </tr>\n                                <tr>\n                                    <th>File</th>\n                                <td>{openModalLiblist.url}</td>\n                                </tr>\n\n                            </thead>\n                            <tbody>\n                         </tbody>\n                            </table>\n                            ))}\n\n                        </div>\n                            </ModalBody>\n                            <ModalFooter>\n                            <Button type=\"button\" color=\"secondary\" onClick={() => { setmodal(!modal); }}>Close</Button>\n                        </ModalFooter>\n                            </div>\n                            </Modal>\n                  </div>\n                  )}\n\n        </CardBody>\n      </Card>\n    </React.Fragment>\n  );\n};\n\nexport default withNamespaces()(stateWrapper(LibraryList));\n"]},"metadata":{},"sourceType":"module"}